<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7038021317385938"
        crossorigin="anonymous"></script>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Higher or Lower? (Market Value)</title>
    <link rel="icon" type="image/x-icon" href="favicon/marketcapgame_favicon.ico">

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

    <style>
                                                                                        @media (max-width: 720px) {
                                                                                            .top-nav { display: none !important; }
                                                                                        }
                                                                                /* Modern dark caramel background and fade-in animation */
/* Removed duplicate #start-screen background */

                                                                                #start-screen {
                                                                                    position: absolute;
                                                                                    inset: 0;
                                                                                    display: flex;
                                                                                    justify-content: center;
                                                                                    align-items: center;
                                                                                    padding: 100px 24px; /* leaves 100px from top & bottom */
                                                                                    z-index: 1;
                                                                                    background: #D1BB91; /* requested beige */
                                                                                    animation: fadeInScreen 1.2s cubic-bezier(0.68, -0.55, 0.27, 1.55);
                                                                                }

                                                                                #start-screen::before {
                                                                                    content: '';
                                                                                    position: absolute;
                                                                                    top: 0;
                                                                                    left: 0;
                                                                                    width: 100%;
                                                                                    height: 100%;
                                                                                    z-index: 0;
                                                                                    pointer-events: none;
                                                                                    background: url('data:image/svg+xml;utf8,<svg width="100%25" height="100%25" viewBox="0 0 1440 900" xmlns="http://www.w3.org/2000/svg"><path fill="%23b8924f" fill-opacity="0.70" d="M0,80 Q360,120 720,80 Q1080,40 1440,100 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.48" d="M0,200 Q360,240 720,200 Q1080,160 1440,220 V900 H0 Z"/><path fill="%23bfa36b" fill-opacity="0.42" d="M0,320 Q360,360 720,320 Q1080,280 1440,340 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.48" d="M0,440 Q360,480 720,440 Q1080,400 1440,460 V900 H0 Z"/><path fill="%23bfa36b" fill-opacity="0.42" d="M0,560 Q360,600 720,560 Q1080,520 1440,580 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.48" d="M0,680 Q360,720 720,680 Q1080,640 1440,700 V900 H0 Z"/><path fill="%23e2cfa1" fill-opacity="0.68" d="M0,800 Q360,840 720,800 Q1080,760 1440,820 V900 H0 Z"/></svg>');
                                                                                    background-repeat: no-repeat;
                                                                                    background-size: cover;
                                                                                    opacity: 1;
                                                                                }
                                                                                @keyframes fadeInScreen {
                                                                                    from { opacity: 0; transform: scale(1.05); }
                                                                                    to { opacity: 1; transform: scale(1); }
                                                                                }
                                                                                .hero-card {
                                                                                    background: linear-gradient(135deg, rgba(30,30,40,0.55) 0%, rgba(20,20,30,0.65) 100%);
                                                                                    box-shadow: 0 8px 48px rgba(20,20,30,0.28);
                                                                                    border-radius: 32px;
                                                                                    padding: 48px 56px;
                                                                                    max-width: 520px;
                                                                                    width: 100%;
                                                                                    margin: 0 auto;
                                                                                    backdrop-filter: blur(6px);
                                                                                    animation: fadeInScreen 1.6s 0.2s cubic-bezier(0.68, -0.55, 0.27, 1.55) backwards;
                                                                                }
                                                                                .title-main {
                                                                                    font-weight: 900;
                                                                                    letter-spacing: 1.2px;
                                                                                    font-size: clamp(2.5rem, 7vw, 4rem);
                                                                                    color: #fff;
                                                                                    margin-bottom: 12px;
                                                                                    text-shadow: 0 2px 12px rgba(60,40,20,0.18);
                                                                                }
                                                                                .title-sub {
                                                                                    color: #e0c48c;
                                                                                    font-size: 1.5rem;
                                                                                    font-weight: 700;
                                                                                    margin-bottom: 24px;
                                                                                    text-shadow: 0 2px 12px rgba(60,40,20,0.18);
                                                                                }
                                                                                .start-controls {
                                                                                    display: flex;
                                                                                    justify-content: center;
                                                                                    margin-top: 32px;
                                                                                }
                                                                                @media (max-width: 720px) {
                                                                                    .game-over-hero .start-controls {
                                                                                        flex-direction: column !important;
                                                                                        align-items: stretch !important;
                                                                                        gap: 18px;
                                                                                        margin-top: 18px;
                                                                                    }
                                                                                    .game-over-hero .start-controls .btn-play-again {
                                                                                        order: 0;
                                                                                        font-size: 2rem !important;
                                                                                        padding: 24px 0 !important;
                                                                                    }
                                                                                    .game-over-hero .start-controls .btn-share {
                                                                                        order: 1;
                                                                                    }
                                                                                    .game-over-hero .start-controls button {
                                                                                        width: 100%;
                                                                                        font-size: 1.25rem !important;
                                                                                        padding: 16px 0 !important;
                                                                                        min-width: 0;
                                                                                    }
                                                                                    .game-over-hero {
                                                                                        padding: 32px 8px !important;
                                                                                        max-width: 98vw !important;
                                                                                    }
                                                                                    .final-score {
                                                                                        font-size: 2.6rem !important;
                                                                                    }
                                                                                }
                                                                                
                                                                                .pill-btn {
                                                                                    background: #222;
                                                                                    color: #fff;
                                                                                    border: none;
                                                                                    border-radius: 999px;
                                                                                    padding: 20px 70px;
                                                                                    font-size: 2rem;
                                                                                    font-weight: 700;
                                                                                    letter-spacing: 0.5px;
                                                                                    box-shadow: 0 4px 24px rgba(60,40,20,0.18);
                                                                                    cursor: pointer;
                                                                                    transition: background 0.2s, color 0.2s, transform 0.18s;
                                                                                    outline: none;
                                                                                    animation: fadeInScreen 1.8s 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55) backwards;
                                                                                }
                                                                                .pill-btn:hover, .pill-btn:focus {
                                                                                    background: #fff;
                                                                                    color: #222;
                                                                                    transform: scale(1.06);
                                                                                    box-shadow: 0 8px 32px rgba(60,40,20,0.22);
                                                                                }
                                                                                .highscore-top {
                                                                                    background: rgba(60,40,20,0.12);
                                                                                    color: #fff;
                                                                                    font-size: 1.1rem;
                                                                                    font-weight: 700;
                                                                                    padding: 8px 18px;
                                                                                    border-radius: 999px;
                                                                                    box-shadow: 0 2px 8px rgba(60,40,20,0.10);
                                                                                    position: absolute;
                                                                                    top: 24px;
                                                                                    left: 24px;
                                                                                    transform: none;
                                                                                }
                                                                .privacy-modal {
                                                                    position: fixed;
                                                                    top: 50%;
                                                                    left: 50%;
                                                                    transform: translate(-50%, -50%);
                                                                    background: rgba(40,40,40,0.98);
                                                                    color: #fff;
                                                                    border-radius: 16px;
                                                                    box-shadow: 0 8px 32px rgba(0,0,0,0.22);
                                                                    padding: 38px 32px 28px 32px;
                                                                    max-width: 480px;
                                                                    width: 90vw;
                                                                    z-index: 100;
                                                                    display: none;
                                                                    max-height: 80vh;
                                                                    overflow-y: auto;
                                                                }
                                                                .privacy-modal.active {
                                                                    display: block;
                                                                }
                                                                .privacy-modal .close-btn {
                                                                    position: absolute;
                                                                    top: 16px;
                                                                    right: 18px;
                                                                    background: none;
                                                                    border: none;
                                                                    color: #fff;
                                                                    font-size: 2rem;
                                                                    cursor: pointer;
                                                                    font-weight: 700;
                                                                }
                                                                .privacy-modal h2 {
                                                                    margin-top: 0;
                                                                    font-size: 1.35rem;
                                                                    margin-bottom: 18px;
                                                                }
                                                                .privacy-modal p {
                                                                    font-size: 1.08rem;
                                                                    margin-bottom: 0;
                                                                }
                                                                .privacy-btn {
                                                                    margin-top: 18px;
                                                                    background: linear-gradient(90deg, #6c757d 0%, #adb5bd 100%);
                                                                    color: #fff;
                                                                    font-size: 1.08rem;
                                                                    font-weight: 500;
                                                                    border: none;
                                                                    border-radius: 8px;
                                                                    padding: 10px 24px;
                                                                    cursor: pointer;
                                                                    transition: background 0.2s;
                                                                }
                                                                .privacy-btn:hover {
                                                                    background: linear-gradient(90deg, #adb5bd 0%, #6c757d 100%);
                                                                }
                                                        .info-icon {
                                                            position: absolute;
                                                            top: 28px;
                                                            right: 32px;
                                                            z-index: 30;
                                                            width: 44px;
                                                            height: 44px;
                                                            display: flex;
                                                            align-items: center;
                                                            justify-content: center;
                                                            background: none;
                                                            border: none;
                                                            cursor: pointer;
                                                        }
                                                        .info-icon svg {
                                                            width: 32px;
                                                            height: 32px;
                                                            fill: #fff;
                                                        }
                                                        .info-popup {
                                                            position: absolute;
                                                            top: 80px;
                                                            right: 32px;
                                                            background: rgba(40,40,40,0.97);
                                                            color: #fff;
                                                            border-radius: 12px;
                                                            box-shadow: 0 4px 24px rgba(0,0,0,0.18);
                                                            padding: 22px 28px;
                                                            max-width: 340px;
                                                            font-size: 1.08rem;
                                                            z-index: 40;
                                                            display: none;
                                                        }
                                                        .info-popup.active {
                                                            display: block;
                                                        }
                                                .btn-back-menu {
                                                    background: linear-gradient(90deg, #6c757d 0%, #adb5bd 100%);
                                                    color: #fff;
                                                    font-weight: 400;
                                                    font-size: clamp(18px,2.4vw,28px);
                                                    padding: 18px 64px;
                                                    border-radius: 12px;
                                                    border: none;
                                                    box-shadow: 0 18px 40px rgba(108,117,125,0.18);
                                                    cursor: pointer;
                                                    transition: transform 0.13s, box-shadow 0.13s, background 0.3s;
                                                    margin: 0;
                                                }
                                                .btn-back-menu:hover, .btn-back-menu:focus {
                                                    background: linear-gradient(90deg, #adb5bd 0%, #6c757d 100%);
                                                    transform: translateY(-4px);
                                                    filter: brightness(.98);
                                                    outline: none;
                                                }
                                        .btn-back-menu {
                                            background: linear-gradient(90deg, #6c757d 0%, #adb5bd 100%);
                                            color: #fff;
                                            font-weight: 400;
                                            font-size: clamp(18px,2.4vw,28px);
                                            padding: 18px 64px;
                                            border-radius: 12px;
                                            border: none;
                                            box-shadow: 0 18px 40px rgba(108,117,125,0.18);
                                            cursor: pointer;
                                            transition: transform 0.13s, box-shadow 0.13s, background 0.3s;
                                            margin: 0;
                                        }
                                        .btn-back-menu:hover, .btn-back-menu:focus {
                                            background: linear-gradient(90deg, #adb5bd 0%, #6c757d 100%);
                                            transform: translateY(-4px);
                                            filter: brightness(.98);
                                            outline: none;
                                        }
                                .game-over-hero {
                                    z-index: 2;
                                }
                                .game-over-hero .title-stack {
                                    margin-bottom: 0;
                                }
                                .game-over-hero .title-main {
                                    margin-bottom: 10px !important;
                                }
                                .game-over-hero .title-sub {
                                    margin-bottom: 18px;
                                }
                                .game-over-hero .display-3 {
                                    margin: 0 0 10px 0 !important;
                                }
                                .game-over-hero #final-score {
                                    margin: 0 0 18px 0 !important;
                                }
                                .game-over-hero #new-record {
                                    margin-bottom: 18px !important;
                                }
                                .game-over-hero .start-controls {
                                    margin-top: 18px;
                                    gap: 18px;
                                    display: flex;
                                    flex-direction: row;
                                    justify-content: center;
                                    width: 100%;
                                }
                        .btn-play-again {
                            background: #111;
                            color: #fff;
                            font-weight: 900;
                            font-size: clamp(22px,3vw,38px);
                            padding: 22px 70px;
                            border-radius: 999px;
                            border: none;
                            box-shadow: 0 8px 32px rgba(0,0,0,0.18);
                            cursor: pointer;
                            transition: background 0.2s, color 0.2s, transform 0.13s, box-shadow 0.13s;
                            margin: 0 0 12px 0;
                        }
                        .btn-play-again:hover, .btn-play-again:focus {
                            background: #fff;
                            color: #111;
                            transform: translateY(-4px);
                            outline: none;
                        }
                .highscore-top {
                    position: absolute;
                    top: 24px;
                    left: 32px;
                    z-index: 20;
                    background: rgba(40,40,40,0.85);
                    color: #fff;
                    font-size: 1.25rem;
                    font-weight: 700;
                    padding: 8px 18px;
                    border-radius: 8px;
                    box-shadow: 0 2px 8px rgba(0,0,0,0.12);
                }
        /* --- BACKGROUND PATTERN DEFINITION (For Body, Start, and End Screens) --- */
        .dotted-pattern {
            /* Dark gray background */
            background-color: #333; 
            /* Subtle dotted diagonal pattern */
            background-image: radial-gradient(circle, #444 1px, transparent 1px), radial-gradient(circle, #444 1px, transparent 1px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
        }
            /* --- Share Score Button Custom Styling --- */
        .btn-menu {
            background: linear-gradient(90deg, #6c757d 0%, #adb5bd 100%);
            color: #fff;
            font-weight: 400 !important;
            font-size: clamp(16px,1.8vw,22px);
            padding: 12px 36px;
            border-radius: 12px;
            border: none;
            box-shadow: 0 18px 40px rgba(108,117,125,0.18);
            cursor: pointer;
            transition: transform 0.13s, box-shadow 0.13s, background 0.3s;
            margin: 0;
        }
        .btn-menu:hover, .btn-menu:focus {
            background: linear-gradient(90deg, #adb5bd 0%, #6c757d 100%);
        }
        @media (max-width:720px){
            .btn-menu { padding: 14px 36px; font-size: 20px; }
        }
        .btn-share {
            background: #111;
            color: #fff;
            font-weight: 500;
            font-size: clamp(18px,2.4vw,28px);
            padding: 18px 64px;
            border-radius: 999px;
            border: none;
            box-shadow: 0 6px 24px rgba(0,0,0,0.12);
            cursor: pointer;
            transition: background 0.3s, color 0.3s, transform 0.13s, box-shadow 0.13s;
            margin: 0;
        }
        .btn-share:hover, .btn-share:focus {
            background: #fff;
            color: #111;
            transform: translateY(-4px);
            box-shadow: 0 10px 32px rgba(0,0,0,0.18);
            outline: none;
        }
        .btn-share.back-menu {
          padding-left: 64px;
          padding-right: 64px;
          border-radius: 999px !important;
        }

        /* --- Global Layout and Structure --- */
        body, html {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; 
        }
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            /* Apply pattern to body so it shows during card transitions */
            background-color: #ffffff;
        }
        .screen-container {
            width: 100vw; 
            height: 100vh;
            position: relative;
            display: flex;
            justify-content: center;
            align-items: center;
            max-width: none;
            min-height: 100vh;
        }
        .game-screen {
            position: absolute;
            width: 100%;
            height: 100%;
            background-color: transparent; /* Play screen has transparent background */
            border-radius: 0; 
            box-shadow: none; 
            transition: opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 0;
        }
        .game-screen.hidden {
            opacity: 0;
            transform: translateY(20px);
            pointer-events: none;
        }
        .game-screen.active {
            opacity: 1;
            transform: translateY(0);
            pointer-events: auto;
        }
        /* START/END screen video styling (full-bleed background) */
        #start-screen-video { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:0; }

        /* hero / start screen layout */
        #start-screen {
        position: absolute;
        inset: 0;
        display: flex;
        justify-content: center;
        align-items: center;
        padding: 100px 24px; /* leaves 100px from top & bottom */
        z-index: 1;
            background: #D1BB91; /* requested beige */
        }

        /* glass/hero card centered above the video */
        .hero-card {
        width: min(1100px, 92%);
        height: calc(100vh - 200px); /* fills between top/bottom gaps */
        max-width: 1100px;
        border-radius: 20px;
        padding: 42px 48px;
        box-sizing: border-box;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        gap: 28px;
        z-index: 2;
        /* subtle frosted glass */
        background: linear-gradient(180deg, rgba(255,255,255,0.04), rgba(255,255,255,0.02));
        border: 1px solid rgba(255,255,255,0.06);
        box-shadow: 0 30px 80px rgba(0,0,0,0.65);
        backdrop-filter: blur(6px);
        }

        /* big title area */
        .title-stack { text-align:center; margin-top:-12px; }
        .title-main {
        font-weight: 900;
        letter-spacing: 0.6px;
        line-height: 0.92;
        font-size: clamp(40px, 6vw, 72px);
        text-transform: uppercase;
        margin: 0;
        text-shadow: 0 6px 28px rgba(0,0,0,0.6), 0 2px 0 rgba(0,0,0,0.7);
        }
        .title-main .higher { color:#28a745; }
        .title-main .or      { color:#ffffff; margin:0 8px; }
        .title-main .lower  { color:#dc3545; }

        .title-sub {
            margin-top: 8px;
            font-weight: 1000;
            color: #d4af37; /* gold */
            font-size: clamp(22px, 3.5vw, 42px); /* slightly bigger */
            text-transform: uppercase;
            letter-spacing: 1px;
            text-shadow: 4px 4px 14px rgba(0,0,0,0.9);
        }

        /* highscore (small, under title) */
        #best-score { color:#fff; font-weight:700; font-size:1.05rem; margin-top:8px; }

        /* primary play button centered */
        .start-controls {
            flex: 1 1 auto;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 100%;
            gap: 18px;
            margin-top: 24px; /* <-- move Play Classic button slightly down (change this single value) */
        }
        .btn-play {
        background: linear-gradient(180deg,#4b9cff,#1a73e8);
        border: none;
        color: #ffffff;
        font-weight:900;
        font-size: clamp(18px,2.4vw,28px);
        padding: 18px 64px;
        border-radius: 12px;
        box-shadow: 0 18px 40px rgba(39,174,96,0.18);
        cursor:pointer;
        }
        .btn-play:hover { transform: translateY(-4px); filter:brightness(.98); }

        /* bottom categories area inside the hero card */
        .categories-bar {
        margin-top: auto;
        width: 100%;
        display:flex;
        flex-direction:column;
        align-items:center;
        gap:12px;
        padding-bottom: 6px;
        }
        .categories-bar h4 { color: rgba(255,255,255,0.9); font-weight:700; margin:0; }
                @media (max-width: 720px) {
                    .categories-bar h4 {
                        text-align: center;
                        width: 100%;
                    }
                }
        .category-buttons { display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
        .category-buttons .btn { padding:8px 12px; font-weight:700; border-radius:8px; opacity:0.95; }

        /* ensure hero-card content stays readable on small screens */
        @media (max-width:720px){
        .hero-card { padding: 28px; height: calc(100vh - 140px); }
        .title-main { font-size: clamp(32px,9vw,48px); }
        .btn-play { padding: 14px 36px; font-size: 20px; }
        }

        /* Game over screen panel uses same visual so text readable */
        #game-over-screen .game-over-panel {
            position: relative;
            z-index: 2;
            width: min(760px, 90%);
            max-width: 760px;
            padding: 36px;
            border-radius: 16px;
            box-shadow: 0 18px 40px rgba(0,0,0,0.6);
            background-color: rgba(51,51,51,0.92);
            background-image: radial-gradient(circle, rgba(68,68,68,0.9) 1px, transparent 1px), radial-gradient(circle, rgba(68,68,68,0.9) 1px, transparent 1px);
            background-size: 30px 30px;
            background-position: 0 0, 15px 15px;
        }
        #game-over-screen .final-score,
        #final-score {
            font-weight: 900; /* make score bold */
            /* keep existing sizing/color if needed */
            font-size: 2.4rem;
            color: #fff;
            text-shadow: 0 6px 24px rgba(0,0,0,0.6), 0 2px 0 rgba(0,0,0,0.75);
        }
        #end-screen-video { position:absolute; inset:0; width:100%; height:100%; object-fit:cover; z-index:0; }
        /* Slight brightening overlay for the top half of the end screen */
        .end-top-brighten { position:fixed; top:0; left:0; width:100%; height:50vh; z-index:1; pointer-events:none; background: linear-gradient(to bottom, rgba(255,255,255,0.18), rgba(255,255,255,0)); }
        /* End screen wave background (matches start screen style) */
        .end-waves { position:fixed; inset:0; z-index:0; pointer-events:none; background: url('data:image/svg+xml;utf8,<svg width="100%25" height="100%25" viewBox="0 0 1440 900" xmlns="http://www.w3.org/2000/svg"><path fill="%23b8924f" fill-opacity="0.85" d="M0 0 H1440 V120 Q1080 80 720 120 Q360 80 0 120 Z"/><path fill="%23b8924f" fill-opacity="0.70" d="M0,60 Q360,100 720,60 Q1080,100 1440,60 V900 H0 Z"/><path fill="%23b8924f" fill-opacity="0.60" d="M0,140 Q360,180 720,140 Q1080,180 1440,140 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.50" d="M0,240 Q360,280 720,240 Q1080,260 1440,240 V900 H0 Z"/><path fill="%23bfa36b" fill-opacity="0.45" d="M0,360 Q360,400 720,360 Q1080,380 1440,360 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.50" d="M0,480 Q360,520 720,480 Q1080,500 1440,480 V900 H0 Z"/><path fill="%23bfa36b" fill-opacity="0.45" d="M0,600 Q360,640 720,600 Q1080,620 1440,600 V900 H0 Z"/><path fill="%23c9b27c" fill-opacity="0.50" d="M0,720 Q360,760 720,720 Q1080,740 1440,720 V900 H0 Z"/><path fill="%23e2cfa1" fill-opacity="0.65" d="M0,820 Q360,860 720,820 Q1080,840 1440,820 V900 H0 Z"/></svg>'); background-repeat:no-repeat; background-size:cover; }
        .hero-card.game-over-hero { /* uses same hero-card styling; ensure sits above video */ z-index:2; }
        .hero-card.game-over-hero .display-3 { text-shadow: 4px 4px 18px rgba(0,0,0,0.8); }

        /* --- Play Screen (Cards) --- */
        #play-screen {
            flex-direction: row;
            justify-content: center;
            align-items: stretch;
            gap: 0;
        }
        .card-wrapper {
            width: 50vw;
            height: 100vh;
            margin: 0;
            padding: 0;
        }
        .game-card {
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            border-radius: 0; 
            box-shadow: none; 
            position: relative;
            cursor: pointer;
            transition: transform 0.6s ease-out, box-shadow 0.2s ease-in-out;
        }
        .card-description {
            font-size: 1.5rem;
            font-weight: normal;
            color: #e0e0e0;
            margin-top: 30px;
            max-width: 80%;
            text-shadow: 3px 3px 8px rgba(0, 0, 0, 1), 1px 1px 3px rgba(0, 0, 0, 0.8);
        }
                /* Stack cards vertically on mobile */
                @media (max-width: 600px) {
                    #play-screen {
                        display: flex !important;
                        flex-direction: column !important;
                        align-items: stretch !important;
                        height: 100vh !important;
                    }
                    .card-wrapper {
                        width: 100vw !important;
                        height: 50vh !important;
                        margin: 0 !important;
                        padding: 0 !important;
                    }
                    #or-container {
                        margin: 0 !important;
                        height: auto !important;
                        display: flex;
                        justify-content: center;
                        align-items: center;
                    }
                }
        /* --- CARD OVERLAY and HOVER EFFECT --- */
        .card-overlay {
            background-color: rgba(0, 0, 0, 0.5); /* Lighter initial darkness */
            color: white;
            text-align: center;
            width: 100%;
            height: 100%;
            position: absolute;
            bottom: 0;
            left: 0;
            display: flex;
            flex-direction: column;
            justify-content: center; 
            align-items: center;
            /* Transition for overlay color (for fade-in/out on hover) */
            transition: background-color 0.5s ease;
            
            /* Border properties for animation */
            border: 12px solid transparent;
            padding: 0; /* Ensures content doesn't shift */
            box-sizing: border-box; /* Includes border in element's total width/height */
        }
        /* Hover Effect: Turn darker with fade */
        .game-card:hover .card-overlay {
             background-color: rgba(0, 0, 0, 0.75); /* Darker on hover */
        }
        
        /* --- BORDER ANIMATION CLASSES --- */
        
        /* 1. Guess State: Shrink and turn white */
        .guess-border {
            border: 12px solid white;
            transition: border 0.5s ease-out, padding 0.5s ease-out; /* Smooth transition to white/shrink */
        }
        /* 2. Correct State: Turn Green */
        .correct-border {
            border: 12px solid #28a745; /* Green */
            transition: border 0.5s ease-out;
        }
        /* 3. Incorrect State: Turn Red */
        .incorrect-border {
            border: 12px solid #dc3545; /* Red */
            transition: border 0.5s ease-out;
        }

        .card-value {
            font-size: 2.5rem;
            font-weight: bold;
            background-color: rgba(255, 255, 255, 0.95);
            color: black;
            padding: 8px 20px;
            border-radius: 8px;
            margin-top: 20px;
            display: inline-block;
        }
        .h1 {
            font-size: 3.5rem;
            font-weight: bold;
            text-shadow: 4px 4px 12px rgba(0, 0, 0, 1), 2px 2px 4px rgba(0, 0, 0, 0.9);
        }

        .start-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-top: 12px;
        }

        .btn-play, .btn-secondary {
            margin-top: 20px; /* Adjust as needed */
            padding: 10px 18px;
            border-radius: 10px;
        }
        /* Vertical divider with centered gap for the OR circle */
        :root {
        --or-size: 120px;              /* match #or-container width */
        --or-gap-extra: 8px;           /* extra spacing around the OR */
        --or-gap-half: calc(var(--or-size) / 2 + var(--or-gap-extra));
        --divider-width: 8px;          /* thicker divider */
        --divider-transition: 0.5s;    /* keep in sync with border transitions */
        }

        #play-screen {
            position: relative; /* ensure pseudo-elements are positioned relative to play screen */
        }

        /* single continuous line from top to bottom */
        #play-screen::before {
            content: '';
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: var(--divider-width); /* use variable for thickness */
            background: white;
            transform: translateX(-50%);
            z-index: 5;                 /* below the OR (OR is z-index:10) */
            pointer-events: none;
            transition: background var(--divider-transition) ease-out, box-shadow var(--divider-transition) ease-out;
        }

        /* remove the ::after pseudo-element entirely */

        /* Divider color states - match border colors & timing */
        #play-screen.correct-divider::before {
            background: #28a745; /* green */
            box-shadow: 0 0 14px rgba(40,167,69,0.45);
        }
        #play-screen.incorrect-divider::before {
            background: #dc3545; /* red */
            box-shadow: 0 0 14px rgba(220,53,69,0.45);
        }
        /* keep white while initial guess animation is running */
        #play-screen.divider-guess::before {
            background: white;
            box-shadow: none;
        }
        /* --- OR/Score Separator --- */
        @keyframes pulse-green {
            /* Redefining green pulse for cleaner look */
            0% { 
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0.7);
            }
            70% { 
                box-shadow: 0 0 0 10px rgba(40, 167, 69, 0); 
            }
            100% { 
                box-shadow: 0 0 0 0 rgba(40, 167, 69, 0); 
            }
        }
        
        #or-container {
            position: absolute;
            z-index: 10;
            display: flex;
            justify-content: center;
            align-items: center;
            width: 120px;
            height: 120px;
            background-color: white;
            border-radius: 50%;
            box-shadow: 0 0 15px rgba(0, 0, 0, 0.5);
            font-size: 2.5rem;
            font-weight: bold;
            color: #333;
            top: 50%; 
            left: 50%;
            transform: translate(-50%, -50%);
            transition: transform 0.3s ease-in-out;
            
        }
        #or-container.correct-anim {
            animation: pulse-green 0.7s ease-out 1;
        }
        
        /* Smooth pop-in/pop-out for score */
        #or-score {
            display: none;
            font-size: 3.5rem;
            color: #28a745; 
            transform: scale(0);
            transition: transform 0.3s cubic-bezier(0.68, -0.55, 0.27, 1.55);
        }
        #or-container.score-anim #or-score {
            display: block;
            transform: scale(1);
        }
        #or-container.score-anim #or-text {
            display: none;
            
        }
    @media (max-width: 600px) {
        :root {
            --or-size: 70px;
            --divider-width: 6px;
        }
        #play-screen::before {
            left: 0;
            top: 50%;
            right: 0;
            bottom: auto;
            width: 100vw;
            height: var(--divider-width);
            transform: translateY(-50%);
        }
        #or-container {
            width: 70px;
            height: 70px;
            font-size: 1.2rem;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }
    }
        /* ---- Simple Top Navigation (black text, no colors) ---- */
        .top-nav { position:absolute; top:0; left:0; right:0; height:72px; display:flex; align-items:center; justify-content:center; gap:24px; padding:0 24px; background:transparent; z-index:3; }
        .top-nav .brand { font-size:1.6rem; font-weight:800; color:#000; text-decoration:none; letter-spacing:0.5px; }
        .top-nav .nav-links { display:flex; align-items:center; gap:22px; }
        .top-nav .nav-links a { color:#000; text-decoration:none; font-weight:600; }
        .top-nav .nav-links a:hover, .top-nav .nav-links a:focus { text-decoration:underline; }
        @media (max-width:720px){
            .top-nav { display: none !important; }
        }
    </style>
</head>
<body class="dotted-pattern">
<button class="info-icon" id="infoButton" aria-label="Game Info">
    <svg viewBox="0 0 24 24">
        <circle cx="12" cy="12" r="11" stroke="#fff" stroke-width="2" fill="none"/>
        <text x="12" y="17" text-anchor="middle" font-size="13" font-family="Arial" fill="#fff">i</text>
    </svg>
</button>
<div class="info-popup" id="infoPopup">
    <div style="display: flex; flex-direction: column; align-items: flex-start;">
        <div style="margin-bottom: 18px;">
            <strong>How to Play:</strong><br>
            Guess which company has a higher or lower market capitalization.<br>
            Click on the company you believe has the <b>HIGHER</b> market cap.<br>
            Your score increases for each correct guess. Try to beat your highscore!<br><br>
            <strong>Tip:</strong> Look at the descriptions of the companies to see what they do! The values are updated at the start of each month!
        </div>
        <div class="imprint-modal" id="imprintModal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:#fff; color:#222; max-width:480px; width:90%; padding:32px 28px 24px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(0,0,0,0.18); z-index:9999;">
            <button class="close-btn" onclick="closeImprintModal()" aria-label="Close Imprint" style="position:absolute; top:18px; right:18px; font-size:2rem; background:none; border:none; color:#888; cursor:pointer;">&times;</button>
            <h2 style="margin-top:0;">Imprint for Market Value Higher or Lower Game</h2>
            <div style="max-height:60vh; overflow-y:auto;">
                <p><strong>Information according to ยง 5 E-Commerce Act (ECG) and ยง 25 Media Act (MedienG)</strong></p>
                <h3>1. Service Operator / Media Owner</h3>
                <p>As a private individual operating this monetized service, the following details are provided:</p>
                <p><strong>Name/Entity:</strong> David Madjarov<br>
                <strong>Address:</strong> Schenkendorfgasse 17<br>
                <strong>Country:</strong> Austria</p>
                <h3>2. Contact Information</h3>
                <p><strong>Email:</strong> <a href="mailto:marketcapgame@gmail.com">marketcapgame@gmail.com</a><br>
                <strong>Telephone:</strong> +43 68181 467357</p>
                <h3>3. Purpose of the Website</h3>
                <p><strong>Editorial Policy/Basic Direction:</strong> The purpose of the website is to provide an entertaining "Higher or Lower" game based on publicly available market data. The content is for entertainment only and does not constitute financial or investment advice.</p>
            </div>
        </div>
        <script>
            function openImprintModal() {
                document.getElementById('imprintModal').style.display = 'block';
            }
            function closeImprintModal() {
                document.getElementById('imprintModal').style.display = 'none';
            }
        </script>
        <button class="privacy-btn" onclick="openPrivacyModal()">Privacy Policy</button>
        <button class="privacy-btn" style="margin-top:8px;" onclick="openTermsModal()">Terms of Service</button>
            <button class="privacy-btn" style="margin-top:8px;" onclick="openContactModal()">Contact Us</button>
            <button class="privacy-btn" style="margin-top:8px;" onclick="openImprintModal()">Imprint</button>
            </div>
        </div>
        <div class="terms-modal" id="termsModal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#fff; color:#222; max-width:480px; width:90%; padding:32px 28px 24px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(0,0,0,0.18); z-index:9999;">
            <button class="close-btn" onclick="closeTermsModal()" aria-label="Close Terms of Service" style="position:absolute; top:18px; right:18px; font-size:2rem; background:none; border:none; color:#888; cursor:pointer;">&times;</button>
            <h2 style="margin-top:0;">Terms of Service for Market Cap Game</h2>
            <div style="max-height:60vh; overflow-y:auto;">
                <p><strong>Effective Date:</strong> November 20, 2025</p>
                <p>These Terms of Service govern your use of the "Market Cap Game", provided by Us.</p>
                <p>By accessing or using the Service, you agree to be bound by these Terms. If you disagree with any part of the terms, you may not access the Service.</p>
                <h3>1. Acceptance of Terms</h3>
                <p>The Service is offered subject to your acceptance without modification of all the terms and conditions contained herein and all other operating rules, policies (including, without limitation, Our Privacy Policy), and procedures that may be published from time to time by Us.</p>
                <h3>2. Changes to These Terms</h3>
                <p>We reserve the right, at Our sole discretion, to modify or replace these Terms at any time. We will provide notice of any material changes, and what constitutes a material change will be determined at Our sole discretion. By continuing to access or use the Service after those revisions become effective, you agree to be bound by the revised terms. If you do not agree to the new terms, please stop using the Service.</p>
                <h3>3. Intellectual Property Rights</h3>
                <strong>A. Ownership:</strong>
                <p>The Service, its original content (excluding publicly available market data), features, and functionality are and will remain the exclusive property of [Your Name/Entity Name] and its licensors. The Service is protected by copyright, trademark, and other laws of both Austria and foreign countries. Our trademarks and trade dress may not be used in connection with any product or service without the prior written consent of [Your Name/Entity Name].</p>
                <strong>B. Data:</strong>
                <p>The market valuation data used in the game is sourced from publicly available information. We make no claim of ownership over the underlying market data, company names, or logos, which remain the property of their respective owners.</p>
                <h3>4. License to Use the Service</h3>
                <p>We grant you a limited, non-exclusive, non-transferable, revocable license to access and use the Service for your personal, non-commercial entertainment purposes only, in accordance with these Terms.</p>
                <h3>5. Prohibited Uses</h3>
                <ul>
                    <li>For any purpose that is illegal or prohibited by these Terms.</li>
                    <li>To engage in any activity that interferes with or disrupts the Service, the servers, or networks connected to the Service.</li>
                    <li>To attempt to gain unauthorized access to any portion or feature of the Service.</li>
                    <li>To submit false or misleading information or impersonate any person or entity.</li>
                    <li>To use the Service for any commercial purpose without Our express written consent.</li>
                </ul>
                <h3>6. Disclaimers and Limitation of Liability</h3>
                <strong>A. Disclaimer of Warranties:</strong>
                <p>The Service is provided on an "AS IS" and "AS AVAILABLE" basis, without any warranties of any kind, either express or implied, including, but not limited to, implied warranties of merchantability, fitness for a particular purpose, non-infringement, or course of performance. We do not warrant that the market data used in the game is real-time, accurate, or complete. The game is for entertainment purposes only and should not be used for investment advice.</p>
                <strong>B. Limitation of Liability:</strong>
                <p>To the maximum extent permitted by applicable law (including mandatory consumer protection laws in Austria), in no event shall [Your Name/Entity Name], nor its directors, employees, partners, agents, suppliers, or affiliates, be liable for any indirect, incidental, special, consequential or punitive damages, including without limitation, loss of profits, data, use, goodwill, or other intangible losses, resulting from (i) your access to or use of or inability to access or use the Service; (ii) any conduct or content of any third party on the Service; (iii) any market data errors; and (iv) unauthorized access, use, or alteration of your transmissions or content.</p>
                <h3>7. Governing Law and Jurisdiction</h3>
                <p>These Terms shall be governed and construed in accordance with the laws of Austria, without regard to its conflict of law provisions. You agree to submit to the exclusive jurisdiction of the courts of Austria to resolve any dispute arising out of these Terms or the Service.</p>
                <h3>8. General Provisions</h3>
                <strong>A. Severability:</strong>
                <p>If any provision of these Terms is held to be invalid or unenforceable by a court, the remaining provisions of these Terms will remain in effect.</p>
                <strong>B. Waiver:</strong>
                <p>Our failure to enforce any right or provision of these Terms will not be considered a waiver of those rights.</p>
                <h3>9. Contact Information</h3>
                <p>If you have any questions about these Terms, please contact us:</p>
                <p><strong>By Email:</strong> <a href="mailto:marketcapgame@gmail.com">marketcapgame@gmail.com</a></p>
            </div>
        </div>
    </div>
<div class="privacy-modal" id="privacyModal">
    <button class="close-btn" onclick="closePrivacyModal()" aria-label="Close Privacy Policy">&times;</button>
    <h2>Privacy Policy for Market Cap Game</h2>
    <p><strong>Effective Date:</strong> November 20, 2025</p>
    <p>This Privacy Policy explains how Market Cap Game manages information for the website marketcapgame.com.</p>
    <p>We are committed to protecting the privacy of our users, particularly those within the European Economic Area (EEA), in compliance with the General Data Protection Regulation (GDPR). This policy specifically addresses how we manage information, especially in the context of using third-party services like Google AdSense.</p>
        <h3>1. Information We Collect Directly</h3>
        <div class="imprint-modal" id="imprintModal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%, -50%); background:#fff; color:#222; max-width:480px; width:90%; padding:32px 28px 24px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(0,0,0,0.18); z-index:9999;">
            <button class="close-btn" onclick="closeImprintModal()" aria-label="Close Imprint" style="position:absolute; top:18px; right:18px; font-size:2rem; background:none; border:none; color:#888; cursor:pointer;">&times;</button>
            <h2 style="margin-top:0;">Imprint for Market Value Higher or Lower Game</h2>
            <div style="max-height:60vh; overflow-y:auto;">
                <p><strong>Information according to ยง 5 E-Commerce Act (ECG) and ยง 25 Media Act (MedienG)</strong></p>
                <h3>1. Service Operator / Media Owner</h3>
                <p>As a private individual operating this monetized service, the following details are provided:</p>
                <p><strong>Name/Entity:</strong> David Madjarov<br>
                <strong>Address:</strong> Schenkendorfgasse 17<br>
                <strong>Country:</strong> Austria</p>
                <h3>2. Contact Information</h3>
                <p><strong>Email:</strong> <a href="mailto:marketcapgame@gmail.com">marketcapgame@gmail.com</a><br>
                <strong>Telephone:</strong> +43 68181 467357</p>
                <h3>3. Purpose of the Website</h3>
                <p><strong>Editorial Policy/Basic Direction:</strong> The purpose of the website is to provide an entertaining "Higher or Lower" game based on publicly available market data. The content is for entertainment only and does not constitute financial or investment advice.</p>
            </div>
        </div>
    <strong>A. Non-Personal Data for Functionality:</strong>
    <ul>
        <li><strong>High Score Data:</strong> We use your browser's Local Storage to save your game's highest score. This data is stored only on your device and is not transmitted to our servers. It is used solely to display your personal best score.</li>
        <li><strong>Gameplay Analytics:</strong> We may collect aggregated, non-personally identifiable usage statistics (e.g., number of games played, average score) to monitor the performance of the Service.</li>
    </ul>
    <strong>B. Personally Identifiable Information (PII):</strong>
    <p>The Service does not require users to register, log in, or provide any personal information (such as names, email addresses, or precise location data). We do not collect PII directly from users.</p>
    <h3>2. Third-Party Services (Google AdSense and Advertising)</h3>
    <p>We use Google AdSense to serve advertisements on our Service. This is the primary method by which we generate revenue and keep the Service free to use.</p>
    <strong>A. Data Collected by Google AdSense:</strong>
    <ul>
        <li>Google and its third-party vendors use cookies and similar tracking technologies to serve personalized ads based on your prior visits to this and other websites. These technologies collect data that may constitute Personal Data under the GDPR, including:</li>
        <ul>
            <li>IP Address</li>
            <li>Browser Type and Device Information</li>
            <li>Operating System</li>
            <li>Interaction with the ads on this Service and other sites.</li>
        </ul>
    </ul>
    <strong>B. Legal Basis for Processing (GDPR):</strong>
    <p>For users in the EEA, the legal basis for processing your data for advertising purposes is your explicit consent, which must be obtained through a valid Consent Management Platform (CMP).</p>
    <p><em>Note for Publisher:</em> As an EEA-based publisher, you must implement a CMP (e.g., Googleโs Funding Choices or a certified third-party CMP) that obtains user consent before any advertising-related cookies are loaded.</p>
    <strong>C. User Choice and Control (Opt-Out):</strong>
    <ul>
        <li><strong>Personalized Advertising:</strong> Users may withdraw consent at any time. They may also manage ad settings by visiting Googleโs Ads Settings.</li>
        <li><strong>Third-Party Vendors:</strong> Users can also opt out of some third-party vendors' use of cookies for personalized advertising by visiting <a href="https://www.aboutads.info" target="_blank" rel="noopener noreferrer">www.aboutads.info</a>.</li>
    </ul>
    <h3>3. Cookies and Tracking Technologies</h3>
    <ul>
        <li><strong>Functional Cookies/Local Storage:</strong> We use local storage for gameplay (High Score data). This is based on our legitimate interest to provide the core functionality of the game.</li>
        <li><strong>Advertising Cookies:</strong> Third parties (like Google AdSense) use cookies for targeted advertising based on user consent (required for EEA users).</li>
    </ul>
    <h3>4. Your Rights Under GDPR (For EEA Residents)</h3>
    <p>If you are a resident of the European Economic Area (EEA), you have the following data protection rights:</p>
    <ul>
        <li><strong>Right to Access:</strong> The right to request copies of your Personal Data.</li>
        <li><strong>Right to Rectification:</strong> The right to request that we correct any information you believe is inaccurate.</li>
        <li><strong>Right to Erasure (Right to be Forgotten):</strong> The right to request that we erase your Personal Data (though we collect very little directly).</li>
        <li><strong>Right to Restrict Processing:</strong> The right to object to or request that we restrict the processing of your Personal Data.</li>
        <li><strong>Right to Data Portability:</strong> The right to have the data we collect transferred to another organization or directly to you.</li>
    </ul>
    <p>To exercise these rights, please use the contact information provided below. You also have the right to lodge a complaint with your local data protection authority (e.g., the รsterreichische Datenschutzbehรถrde in Austria).</p>
    <h3>5. Childrenโs Privacy (COPPA/GDPR)</h3>
    <p>This Service is intended for a general audience and is not directed to children under the age of 16 (the GDPR standard for many EU countries, including Austria, for digital consent). We do not knowingly collect Personal Data from children under 16.</p>
    <h3>6. Changes to This Privacy Policy</h3>
    <p>We may update our Privacy Policy from time to time. We will notify you of any material changes by posting the new Privacy Policy on this page.</p>
    <h3>7. Contact Us</h3>
    <p>If you have any questions about this Privacy Policy or wish to exercise your data subject rights, please contact us:</p>
    <p><strong>By Email:</strong> <a href="mailto:marketcapgame@gmail.com">marketcapgame@gmail.com</a></p>
</div>
</div>
<div class="screen-container">
<!-- Global Contact Modal (moved out of info popup so it's always accessible) -->
<div class="contact-modal" id="contactModal" style="display:none; position:fixed; top:50%; left:50%; transform:translate(-50%,-50%); background:#e0e0e0; color:#222; max-width:420px; width:90%; padding:32px 28px 24px 28px; border-radius:18px; box-shadow:0 8px 32px rgba(0,0,0,0.18); z-index:9999;">
    <button class="close-btn" onclick="closeContactModal()" aria-label="Close Contact" style="position:absolute; top:18px; right:18px; font-size:2rem; background:none; border:none; color:#888; cursor:pointer;">&times;</button>
    <h2 style="margin-top:0;">Contact Us</h2>
    <p>
        For any questions, feedback, or support, please contact us:<br><br>
        <strong>Email:</strong> <a href="mailto:marketcapgame@gmail.com">marketcapgame@gmail.com</a><br>
        <strong>Twitter:</strong> -<br>
        <strong>Website:</strong> <a href="https://marketcapgame.com" target="_blank">marketcapgame.com</a><br><br>
        We aim to respond within 48 hours.
    </p>
</div>

        <div id="start-screen" class="game-screen active">
    <!-- Removed video for beige background -->

    <header class="top-nav" role="navigation" aria-label="Primary">
        <a href="#" class="brand" onclick="event.preventDefault(); window.location.reload();">HiLoMC</a>
        <nav class="nav-links">
            <a href="#">Website</a>
            <a href="#" role="button" aria-controls="contactModal" onclick="event.preventDefault(); openContactModal();">About Us</a>
            <a href="#" role="button" aria-controls="infoPopup" onclick="event.preventDefault(); event.stopPropagation(); toggleInfoPopup();">How To Play</a>
            <a href="#" role="button" aria-controls="contactModal" onclick="event.preventDefault(); openContactModal();">Talk to us โ</a>
        </nav>
    </header>

    <div id="best-score" class="highscore-top">Highscore: <strong id="best-score-value">0</strong></div>
    <!-- hero card: centered, stops 100px from top/bottom -->
    <div class="hero-card" role="region" aria-label="Start">
        <div class="title-stack">
        <h1 class="title-main">
            <span class="higher">HIGHER</span>
            <span class="or"> OR </span>
            <span class="lower">LOWER</span>
        </h1>
        <div class="title-sub">MARKET CAP</div>
                <div style="color:#fff; text-align:center; margin:24px 0 8px 0; font-size:1.15rem; font-weight:400;">
                    <span style="color:#fff;">All stats are based on the market capitalization of the companies.</span><br>
                    <span style="display:block; margin-top:6px; font-size:1rem; color:#fff;">Updated November 2025</span>
                </div>
        </div>

        <div class="start-controls">
        <button id="start-button" class="pill-btn" onclick="hideInfoPopup(); showScreen('play-screen'); startGame()">Start Game</button>
        </div>

        <div class="categories-bar" aria-hidden="true">
            <h4 style="color:#fff;">Categories (Coming Soon!)</h4>
        <div class="category-buttons">
            <button class="btn btn-light" disabled>๐ Company Stocks</button>
            <button class="btn btn-light" disabled>๐ฐ Company Revenue</button>
            <button class="btn btn-light" disabled>๐ธ Company Earnings</button>
        </div>
        </div>
    </div>
    </div>

    <div id="play-screen" class="game-screen hidden">
        
        <div id="current-card-wrapper" class="card-wrapper">
            <div id="current-card" class="game-card" onclick="makeGuess('lower')">
                <div class="card-overlay" id="current-overlay">
                    <div id="current-name" class="h1"></div>
                    <div id="current-cap-wrapper">
                        <div id="current-cap" class="card-value"></div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="or-container">
            <span id="or-text">OR</span>
            <span id="or-score" style="display:none;"></span>
            <span id="score-popup" style="display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); color:#333; font-size:2.5rem; font-weight:bold; font-family:inherit; z-index:20; pointer-events:none; transition:opacity 0.3s; opacity:0;"></span>
        <style>
            #score-popup.fade-in {
                opacity: 1 !important;
                transition: opacity 0.4s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            }
        </style>
        </div>

        <div id="next-card-wrapper" class="card-wrapper">
            <div id="next-card" class="game-card" onclick="makeGuess('higher')">
                <div class="card-overlay" id="next-overlay">
                    <div id="next-name" class="h1"></div>
                    <div id="next-cap-wrapper">
                        <div id="next-cap" class="card-value">Value: ???</div>
                    </div>
                </div>
            </div>
        </div>
        
        <div id="current-score-display" class="h2" style="position: absolute; top: 20px; right: 20px; background: rgba(0,0,0,0.5); padding: 10px 20px; border-radius: 5px; color: white; z-index: 15;">Score: <span id="current-score">0</span></div>

        <div id="game-info" style="position: absolute; bottom: 20px; z-index: 10; width: 80%; text-align: center;">
            <div id="game-message" class="alert alert-info" style="display:none; margin:0;"></div>
        </div>
    </div>

    <div id="game-over-screen" class="game-screen hidden">
    <header class="top-nav" role="navigation" aria-label="Primary">
        <a href="#" class="brand" onclick="event.preventDefault(); window.location.reload();">HiLoMC</a>
        <nav class="nav-links">
            <a href="#">Websites</a>
            <a href="#" role="button" aria-controls="contactModal" onclick="event.preventDefault(); openContactModal();">About Us</a>
            <a href="#" role="button" aria-controls="infoPopup" onclick="event.preventDefault(); event.stopPropagation(); toggleInfoPopup();">How To Play</a>
            <a href="#" role="button" aria-controls="contactModal" onclick="event.preventDefault(); openContactModal();">Talk to us โ</a>
        </nav>
    </header>
    <!-- full-bleed wavy SVG background for end screen -->
    <div id="end-screen-bg" style="position:fixed; top:0; left:0; width:100vw; height:100vh; z-index:1; pointer-events:none;">
        <svg width="100vw" height="100vh" viewBox="0 0 1440 900" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg" style="display:block; width:100vw; height:100vh;">
            <rect x="0" y="0" width="1440" height="900" fill="url(#bgPinkGradient)" fill-opacity="0.35" />
            <defs>
                <linearGradient id="bgPinkGradient" x1="0" y1="0" x2="1" y2="1">
                    <!-- Beige gradient to match start screen palette -->
                    <stop offset="0%" stop-color="#d5c08e" />
                    <stop offset="100%" stop-color="#bfa36b" />
                </linearGradient>
            </defs>
            <g opacity="0.18">
                <path d="M0,180 Q220,80 320,180 T520,180 T720,280 T920,180 T1120,230 T1440,180" stroke="#ffffff" stroke-opacity="0.55" stroke-width="15" fill="none">
                    <animate attributeName="d" dur="7s" repeatCount="indefinite" values="M0,180 Q220,80 320,180 T520,180 T720,280 T920,180 T1120,230 T1440,180;M0,200 Q220,100 320,200 T520,200 T720,300 T920,200 T1120,250 T1440,200;M0,180 Q220,80 320,180 T520,180 T720,280 T920,180 T1120,230 T1440,180"/>
                </path>
                <path d="M0,760 Q280,960 480,760 T880,960 T1440,760" stroke="#ffffff" stroke-opacity="0.55" stroke-width="11" fill="none">
                    <animate attributeName="d" dur="8s" repeatCount="indefinite" values="M0,760 Q280,960 480,760 T880,960 T1440,760;M0,780 Q280,980 480,780 T880,980 T1440,780;M0,760 Q280,960 480,760 T880,960 T1440,760"/>
                </path>
                <path d="M0,420 Q580,620 780,420 T1440,620" stroke="#f8f8f8" stroke-opacity="0.6" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="7.5s" repeatCount="indefinite" values="M0,420 Q580,620 780,420 T1440,620;M0,440 Q580,640 780,440 T1440,640;M0,420 Q580,620 780,420 T1440,620"/>
                </path>
                <path d="M0,300 Q400,500 600,300 T1000,500 T1440,300" stroke="#ffffff" stroke-opacity="0.5" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="8.5s" repeatCount="indefinite" values="M0,300 Q400,500 600,300 T1000,500 T1440,300;M0,320 Q400,520 600,320 T1000,520 T1440,320;M0,300 Q400,500 600,300 T1000,500 T1440,300"/>
                </path>
                <path d="M0,100 Q800,300 1000,100 T1440,300" stroke="#f8f8f8" stroke-opacity="0.58" stroke-width="6" fill="none">
                    <animate attributeName="d" dur="6.5s" repeatCount="indefinite" values="M0,100 Q800,300 1000,100 T1440,300;M0,120 Q800,320 1000,120 T1440,320;M0,100 Q800,300 1000,100 T1440,300"/>
                </path>
                <path d="M0,850 Q400,650 600,850 T1000,850 T1440,850" stroke="#ffffff" stroke-opacity="0.55" stroke-width="9" fill="none">
                    <animate attributeName="d" dur="9s" repeatCount="indefinite" values="M0,850 Q400,650 600,850 T1000,850 T1440,850;M0,870 Q400,670 600,870 T1000,670 T1440,870;M0,850 Q400,650 600,850 T1000,850 T1440,850"/>
                </path>
                <path d="M0,500 Q300,300 500,500 T900,300 T1440,500" stroke="#f8f8f8" stroke-opacity="0.6" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="7.5s" repeatCount="indefinite" values="M0,500 Q300,300 500,500 T900,300 T1440,500;M0,520 Q300,320 500,520 T900,320 T1440,520;M0,500 Q300,300 500,500 T900,300 T1440,500"/>
                </path>
                <path d="M0,700 Q600,900 800,700 T1440,900" stroke="#ffffff" stroke-opacity="0.5" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="8s" repeatCount="indefinite" values="M0,700 Q600,900 800,700 T1440,900;M0,720 Q600,920 800,720 T1440,920;M0,700 Q600,900 800,700 T1440,900"/>
                </path>
                <path d="M0,100 Q1200,300 1440,100" stroke="#f8f8f8" stroke-opacity="0.58" stroke-width="6" fill="none">
                    <animate attributeName="d" dur="7s" repeatCount="indefinite" values="M0,100 Q1200,300 1440,100;M0,120 Q1200,320 1440,120;M0,100 Q1200,300 1440,100"/>
                </path>
                <path d="M0,850 Q500,650 700,850 T1100,650 T1440,850" stroke="#ffffff" stroke-opacity="0.55" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="8.5s" repeatCount="indefinite" values="M0,850 Q500,650 700,850 T1100,650 T1440,850;M0,870 Q500,670 700,870 T1100,670 T1440,870;M0,850 Q500,650 700,850 T1100,650 T1440,850"/>
                </path>
                <path d="M0,100 Q400,300 600,100 T1000,300 T1440,100" stroke="#f8f8f8" stroke-opacity="0.58" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="6.5s" repeatCount="indefinite" values="M0,100 Q400,300 600,100 T1000,300 T1440,100;M0,120 Q400,320 600,120 T1000,320 T1440,120;M0,100 Q400,300 600,100 T1000,300 T1440,100"/>
                </path>
                <path d="M0,850 Q800,650 1000,850 T1440,650" stroke="#ffffff" stroke-opacity="0.55" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="8s" repeatCount="indefinite" values="M0,850 Q800,650 1000,850 T1440,650;M0,870 Q800,670 1000,870 T1440,670;M0,850 Q800,650 1000,850 T1440,650"/>
                </path>
                <path d="M0,300 Q300,500 500,300 T900,500 T1440,300" stroke="#f8f8f8" stroke-opacity="0.6" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="7.5s" repeatCount="indefinite" values="M0,300 Q300,500 500,300 T900,500 T1440,300;M0,320 Q300,520 500,320 T900,520 T1440,320;M0,300 Q300,500 500,300 T900,500 T1440,300"/>
                </path>
                <path d="M0,100 Q600,300 800,100 T1440,300" stroke="#ffffff" stroke-opacity="0.5" stroke-width="6" fill="none">
                    <animate attributeName="d" dur="7s" repeatCount="indefinite" values="M0,100 Q600,300 800,100 T1440,300;M0,120 Q600,320 800,120 T1440,320;M0,100 Q600,300 800,100 T1440,300"/>
                </path>
                <path d="M0,850 Q1200,650 1440,850" stroke="#f8f8f8" stroke-opacity="0.58" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="8.5s" repeatCount="indefinite" values="M0,850 Q1200,650 1440,850;M0,870 Q1200,670 1440,870;M0,850 Q1200,650 1440,850"/>
                </path>
                <path d="M0,600 Q400,800 600,600 T1000,800 T1440,600" stroke="#ffffff" stroke-opacity="0.5" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="8s" repeatCount="indefinite" values="M0,600 Q400,800 600,600 T1000,800 T1440,600;M0,620 Q400,820 600,620 T1000,820 T1440,620;M0,600 Q400,800 600,600 T1000,800 T1440,600"/>
                </path>
                <path d="M0,400 Q800,600 1000,400 T1440,600" stroke="#f8f8f8" stroke-opacity="0.6" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="7.5s" repeatCount="indefinite" values="M0,400 Q800,600 1000,400 T1440,600;M0,420 Q800,620 1000,420 T1440,620;M0,400 Q800,600 1000,400 T1440,600"/>
                </path>
                <path d="M0,700 Q300,900 500,700 T900,900 T1440,700" stroke="#ffffff" stroke-opacity="0.5" stroke-width="7" fill="none">
                    <animate attributeName="d" dur="8s" repeatCount="indefinite" values="M0,700 Q300,900 500,700 T900,900 T1440,700;M0,720 Q300,920 500,720 T900,920 T1440,720;M0,700 Q300,900 500,700 T900,900 T1440,700"/>
                </path>
                <path d="M0,900 Q600,700 800,900 T1440,700" stroke="#f8f8f8" stroke-opacity="0.58" stroke-width="8" fill="none">
                    <animate attributeName="d" dur="8.5s" repeatCount="indefinite" values="M0,900 Q600,700 800,900 T1440,700;M0,920 Q600,720 800,920 T1440,720;M0,900 Q600,700 800,900 T1440,700"/>
                </path>
                <!-- Circles remain static -->
                <circle cx="300" cy="600" r="40" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="900" cy="300" r="30" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="1200" cy="500" r="50" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="700" cy="800" r="25" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="500" cy="200" r="22" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="1100" cy="700" r="35" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="200" cy="400" r="18" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="1300" cy="200" r="28" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="400" cy="100" r="20" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="800" cy="500" r="24" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="1000" cy="800" r="32" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="600" cy="300" r="16" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="1200" cy="200" r="26" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="200" cy="700" r="18" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="1300" cy="800" r="28" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="400" cy="600" r="20" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="800" cy="100" r="24" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="1000" cy="300" r="32" fill="#f8f8f8" fill-opacity="0.6" />
                <circle cx="600" cy="700" r="16" fill="#ffffff" fill-opacity="0.55" />
                <circle cx="1200" cy="900" r="26" fill="#f8f8f8" fill-opacity="0.6" />
            </g>
        </svg>
    </div>
    <!-- Beige waves overlay (matches start screen) -->
    <div class="end-waves"></div>
    <div class="end-top-brighten"></div>
    <div id="end-highscore" class="highscore-top">Highscore: <span id="end-highscore-value">0</span></div>
    <!-- reuse the same hero-card layout so content sits above the video -->
    <div class="hero-card game-over-hero" role="region" aria-label="Your Score">
        <div class="title-stack">
            <h1 class="title-main">
                <span class="higher">HIGHER</span>
                <span class="or"> OR </span>
                <span class="lower">LOWER</span>
            </h1>
            <div class="title-sub">MARKET CAP</div>
        </div>
        <div class="display-3" style="font-weight:900; color:#ff6b6b;">YOUR SCORE:</div>
        <div class="final-score" id="final-score" style="font-size:4.2rem; font-weight:900; color:#fff; letter-spacing:2px;">0</div>
        <div class="start-controls">
            <button class="btn btn-share" id="share-score-button" onclick="shareScore()">Share Score</button>
            <button class="btn-play-again" onclick="startGame(); showScreen('play-screen')">Play Again</button>
            <button class="btn btn-share back-menu" onclick="showScreen('start-screen')">Back to Menu</button>
        </div>
        </div>
    </div>
</div>


<script>
                    function openContactModal() {
                        try { hideInfoPopup(); } catch(e) {}
                        var cm = document.getElementById('contactModal');
                        if (cm) cm.style.display = 'block';
                    }
                    function closeContactModal() {
                        document.getElementById('contactModal').style.display = 'none';
                    }
            function openPrivacyModal() {
                document.getElementById('privacyModal').classList.add('active');
            }
            function closePrivacyModal() {
                document.getElementById('privacyModal').classList.remove('active');
            }
            function openTermsModal() {
                document.getElementById('termsModal').style.display = 'block';
            }
            function closeTermsModal() {
                document.getElementById('termsModal').style.display = 'none';
            }
        function toggleInfoPopup() {
            var popup = document.getElementById('infoPopup');
            popup.classList.toggle('active');
        }

        function hideInfoPopup() {
            var popup = document.getElementById('infoPopup');
            if (popup) popup.classList.remove('active');
        }
            // Prevent info icon click from closing popup
            document.getElementById('infoButton').addEventListener('click', function(event) {
                event.stopPropagation();
                toggleInfoPopup();
            });

            // Close info popup when clicking outside
            document.addEventListener('click', function(event) {
                var popup = document.getElementById('infoPopup');
                if (popup && popup.classList.contains('active')) {
                    if (!popup.contains(event.target)) {
                        popup.classList.remove('active');
                    }
                }
            });
    // --- JAVASCRIPT GAME LOGIC ---

    // 1. DATA SOURCE: PLACE YOUR COMPANIES HERE!
    const companies = [
    { name: 'NVIDIA', market_cap_t: 4.630, description: 'AI and GPU chip innovator', image_url: 'logos_1/nvidia.jpg' },
    { name: 'Apple', market_cap_t: 4.025, description: 'Premium, integrated hardware, software, services', image_url: 'logos_1/apple.jpg' },
    { name: 'Microsoft', market_cap_t: 3.791, description: 'Cloud, software, and AI platform', image_url: 'logos_1/microsoft.jpg' },
    { name: 'Alphabet (Google)', market_cap_t: 3.338, description: 'Search engine and advertising platform', image_url: 'logos_1/alphabet_google.jpg' },
    { name: 'Amazon', market_cap_t: 2.508, description: 'E-commerce, cloud computing, and logistics', image_url: 'logos_1/amazon.jpg' },
    { name: 'Saudi Aramco', market_cap_t: 1.674, description: 'Largest global oil producer', image_url: 'logos_1/saudi_aramco.jpg' },
    { name: 'Broadcom', market_cap_t: 1.617, description: 'Semiconductor and infrastructure software', image_url: 'logos_1/broadcom.jpg' },
    { name: 'Meta Platforms (Facebook)', market_cap_t: 1.536, description: 'Social media and Reality Labs', image_url: 'logos_1/meta_platforms.jpg' },
    { name: 'TSMC', market_cap_t: 1.477, description: 'World\'s leading chip manufacturer', image_url: 'logos_1/tsmc.jpg' },
    { name: 'Tesla', market_cap_t: 1.344, description: 'Electric vehicles and energy storage', image_url: 'logos_1/tesla.jpg' },
    { name: 'Berkshire Hathaway', market_cap_t: 1.098, description: 'Conglomerate led by Warren Buffett', image_url: 'logos_1/berkshire_hathaway.jpg' },
    { name: 'Eli Lilly', market_cap_b: 919.11, description: 'Pharmaceuticals, diabetes, and obesity drugs', image_url: 'logos_1/eli_lilly.jpg' },
    { name: 'JPMorgan Chase', market_cap_b: 826.50, description: 'Major global financial services bank', image_url: 'logos_1/jpmorgan_chase.jpg' },
    { name: 'Walmart', market_cap_b: 817.05, description: 'Largest worldwide retailer', image_url: 'logos_1/walmart.jpg' },
    { name: 'Tencent', market_cap_b: 750.21, description: 'Gaming, social media, and fintech', image_url: 'logos_1/tencent.jpg' },
    { name: 'Visa', market_cap_b: 636.90, description: 'Global payments technology network', image_url: 'logos_1/visa.jpg' },
    { name: 'Oracle', market_cap_b: 635.29, description: 'Cloud and database software', image_url: 'logos_1/oracle.jpg' },
    { name: 'Exxon Mobil', market_cap_b: 503.04, description: 'Oil and gas exploration', image_url: 'logos_1/exxon_mobil.jpg' },
    { name: 'Mastercard', market_cap_b: 490.06, description: 'Payments processing and financial technology', image_url: 'logos_1/mastercard.jpg' },
    { name: 'Johnson & Johnson', market_cap_b: 472.05, description: 'Pharmaceuticals and medical devices', image_url: 'logos_1/johnson_johnson.jpg' },
    { name: 'Netflix', market_cap_b: 471.26, description: 'Global streaming entertainment service', image_url: 'logos_1/netflix.jpg' },
    { name: 'Samsung', market_cap_b: 434.58, description: 'Electronics, memory chips, appliances', image_url: 'logos_1/samsung.jpg' },
    { name: 'Palantir', market_cap_b: 414.74, description: 'Big data analytics and AI', image_url: 'logos_1/palantir.jpg' },
    { name: 'AbbVie', market_cap_b: 410.66, description: 'Research-based pharmaceutical company', image_url: 'logos_1/abbvie.jpg' },
    { name: 'Costco', market_cap_b: 409.04, description: 'Membership warehouse club retail', image_url: 'logos_1/costco.jpg' },
    { name: 'Agricultural Bank of China', market_cap_b: 406.98, description: 'Commercial and retail banking', image_url: 'logos_1/agricultural_bank_of_china.jpg' },
    { name: 'AMD', market_cap_b: 401.81, description: 'Microprocessors and graphics processing units', image_url: 'logos_1/amd.jpg' },
    { name: 'ASML', market_cap_b: 395.99, description: 'Semiconductor equipment lithography systems', image_url: 'logos_1/asml.jpg' },
    { name: 'ICBC', market_cap_b: 384.51, description: 'Largest commercial bank in China', image_url: 'logos_1/icbc.jpg' },
    { name: 'Bank of America', market_cap_b: 384.18, description: 'Major US multinational bank', image_url: 'logos_1/bank_of_america.jpg' },
    { name: 'Alibaba', market_cap_b: 382.86, description: 'E-commerce, cloud, and logistics', image_url: 'logos_1/alibaba.jpg' },
    { name: 'LVMH', market_cap_b: 373.62, description: 'Global luxury goods conglomerate', image_url: 'logos_1/lvmh.jpg' },
    { name: 'Home Depot', market_cap_b: 360.68, description: 'Home improvement supplies retailer', image_url: 'logos_1/home_depot.jpg' },
    { name: 'Procter & Gamble', market_cap_b: 345.06, description: 'Consumer goods and household products', image_url: 'logos_1/procter_gamble.jpg' },
    { name: 'General Electric', market_cap_b: 321.52, description: 'Aerospace, power, and renewable energy', image_url: 'logos_1/general_electric.jpg' },
    { name: 'Chevron', market_cap_b: 315.13, description: 'Integrated energy and chemicals company', image_url: 'logos_1/chevron.jpg' },
    { name: 'Prosus', market_cap_b: 308.42, description: 'Global consumer internet group', image_url: 'logos_1/prosus.jpg' },
    { name: 'Cisco', market_cap_b: 307.37, description: 'Networking hardware and telecommunications', image_url: 'logos_1/cisco.jpg' },
    { name: 'Coca-Cola', market_cap_b: 306.10, description: 'Global beverage company', image_url: 'logos_1/coca_cola.jpg' },
    { name: 'UnitedHealth', market_cap_b: 291.55, description: 'Managed healthcare and insurance', image_url: 'logos_1/unitedhealth.jpg' },
    { name: 'China Construction Bank', market_cap_b: 290.09, description: 'Large commercial state-owned bank', image_url: 'logos_1/china_construction_bank.jpg' },
    { name: 'SAP', market_cap_b: 286.70, description: 'Enterprise application software and cloud', image_url: 'logos_1/sap.jpg' },
    { name: 'IBM', market_cap_b: 285.73, description: 'IT, consulting, and cloud computing', image_url: 'logos_1/ibm.jpg' },
    { name: 'AstraZeneca', market_cap_b: 277.13, description: 'Pharmaceuticals and biotechnology research', image_url: 'logos_1/astrazeneca.jpg' },
    { name: 'Micron Technology', market_cap_b: 277.05, description: 'Memory and storage solutions', image_url: 'logos_1/micron_technology.jpg' },
    { name: 'Toyota', market_cap_b: 270.46, description: 'Leading global automotive manufacturer', image_url: 'logos_1/toyota.jpg' },
    { name: 'Hermรจs', market_cap_b: 267.03, description: 'French luxury goods house', image_url: 'logos_1/hermes.jpg' },
    { name: 'Wells Fargo', market_cap_b: 266.97, description: 'US banking and financial services', image_url: 'logos_1/wells_fargo.jpg' },
    { name: 'SK Hynix', market_cap_b: 265.90, description: 'Semiconductors and memory chips', image_url: 'logos_1/sk_hynix.jpg' },
    { name: 'CATL', market_cap_b: 261.98, description: 'Electric vehicle battery giant', image_url: 'logos_1/catl.jpg' },
    { name: 'Morgan Stanley', market_cap_b: 260.42, description: 'Investment banking and wealth management', image_url: 'logos_1/morgan_stanley.jpg' },
    { name: 'Nestlรฉ', market_cap_b: 260.29, description: 'World\'s largest food company', image_url: 'logos_1/nestle.jpg' },
    { name: 'Caterpillar', market_cap_b: 259.55, description: 'Construction and mining equipment', image_url: 'logos_1/caterpillar.jpg' },
    { name: 'Roche', market_cap_b: 258.03, description: 'Pharmaceuticals and diagnostic healthcare', image_url: 'logos_1/roche.jpg' },
    { name: 'Kweichow Moutai', market_cap_b: 256.95, description: 'Luxury Chinese liquor producer', image_url: 'logos_1/kweichow_moutai.jpg' },
    { name: 'Novartis', market_cap_b: 253.01, description: 'Global pharmaceutical company', image_url: 'logos_1/novartis.jpg' },
    { name: 'HSBC', market_cap_b: 250.19, description: 'International banking and financial services', image_url: 'logos_1/hsbc.jpg' },
    { name: 'Bank of China', market_cap_b: 247.63, description: 'State-owned commercial bank', image_url: 'logos_1/bank_of_china.jpg' },
    { name: 'China Mobile', market_cap_b: 246.70, description: 'Largest mobile telecommunications company', image_url: 'logos_1/china_mobile.jpg' },
    { name: 'American Express', market_cap_b: 246.04, description: 'Credit card and financial services', image_url: 'logos_1/american_express.jpg' },
    { name: 'PetroChina', market_cap_b: 245.36, description: 'China\'s largest oil and gas firm', image_url: 'logos_1/petrochina.jpg' },
    { name: 'Philip Morris International', market_cap_b: 241.94, description: 'Tobacco and smoke-free products', image_url: 'logos_1/philip_morris_international.jpg' },
    { name: 'T-Mobile US', market_cap_b: 241.68, description: 'Major US wireless carrier', image_url: 'logos_1/t_mobile_us.jpg' },
    { name: 'International Holding Company', market_cap_b: 238.65, description: 'Diversified Abu Dhabi conglomerate', image_url: 'logos_1/international_holding_company.jpg' },
    { name: 'Goldman Sachs', market_cap_b: 237.21, description: 'Global investment banking firm', image_url: 'logos_1/goldman_sachs.jpg' },
    { name: 'RTX', market_cap_b: 235.39, description: 'Aerospace and defense technologies', image_url: 'logos_1/rtx.jpg' },
    { name: 'Salesforce', market_cap_b: 231.96, description: 'Cloud-based CRM software company', image_url: 'logos_1/salesforce.jpg' },
    { name: 'Reliance Industries', market_cap_b: 231.95, description: 'Diversified conglomerate, energy to retail', image_url: 'logos_1/reliance_industries.jpg' },
    { name: 'Merck', market_cap_b: 230.62, description: 'Pharmaceuticals, vaccines, and animal health', image_url: 'logos_1/merck.jpg' },
    { name: 'Abbott Laboratories', market_cap_b: 227.07, description: 'Medical devices and healthcare products', image_url: 'logos_1/abbott_laboratories.jpg' },
    { name: 'Siemens', market_cap_b: 226.79, description: 'Industrial automation and digitalization', image_url: 'logos_1/siemens.jpg' },
    { name: "L'Orรฉal", market_cap_b: 224.88, description: 'World\'s largest cosmetics company', image_url: 'logos_1/l_oreal.jpg' },
    { name: 'Shell', market_cap_b: 218.97, description: 'Oil, gas, and renewable energy', image_url: 'logos_1/shell.jpg' },
    { name: 'McDonald', market_cap_b: 218.65, description: 'Global fast-food restaurant chain', image_url: 'logos_1/mcdonald.jpg' },
    { name: 'Thermo Fisher Scientific', market_cap_b: 217.42, description: 'Scientific instruments and services', image_url: 'logos_1/thermo_fisher_scientific.jpg' },
    { name: 'Novo Nordisk', market_cap_b: 217.27, description: 'Diabetes and pharmaceutical treatments', image_url: 'logos_1/novo_nordisk.jpg' },
    { name: 'Royal Bank Of Canada', market_cap_b: 209.73, description: 'Leading Canadian multinational bank', image_url: 'logos_1/royal_bank_of_canada.jpg' },
    { name: 'Shopify', market_cap_b: 203.43, description: 'E-commerce platform for online stores', image_url: 'logos_1/shopify.jpg' },
    { name: 'Pepsico', market_cap_b: 199.42, description: 'Beverages and snack foods', image_url: 'logos_1/pepsico.jpg' },
    { name: 'Linde', market_cap_b: 197.70, description: 'Industrial gases and engineering', image_url: 'logos_1/linde.jpg' },
    { name: 'SoftBank', market_cap_b: 195.15, description: 'Technology investment holding company', image_url: 'logos_1/softbank.jpg' },
    { name: 'Intuitive Surgical', market_cap_b: 194.79, description: 'Robotic surgical systems manufacturer', image_url: 'logos_1/intuitive_surgical.jpg' },
    { name: 'Airbus', market_cap_b: 191.00, description: 'Global aircraft manufacturer', image_url: 'logos_1/airbus.jpg' },
    { name: 'Uber', market_cap_b: 190.37, description: 'Ride-hailing and food delivery', image_url: 'logos_1/uber.jpg' },
    { name: 'Walt Disney', market_cap_b: 190.22, description: 'Entertainment, media, and theme parks', image_url: 'logos_1/walt_disney.jpg' },
    { name: 'AppLovin', market_cap_b: 188.47, description: 'Mobile app monetization and growth', image_url: 'logos_1/applovin.jpg' },
    { name: 'HDFC Bank', market_cap_b: 186.77, description: 'Leading Indian private sector bank', image_url: 'logos_1/hdfc_bank.jpg' },
    { name: 'QUALCOMM', market_cap_b: 186.33, description: 'Wireless technology and semiconductors', image_url: 'logos_1/qualcomm.jpg' },
    { name: 'Lam Research', market_cap_b: 186.21, description: 'Semiconductor manufacturing equipment', image_url: 'logos_1/lam_research.jpg' },
    { name: 'PDD Holdings (Pinduoduo)', market_cap_b: 185.90, description: 'E-commerce platform (Temu and Pinduoduo)', image_url: 'logos_1/pdd_holdings.jpg' },
    { name: 'Intuit', market_cap_b: 184.68, description: 'Financial software for consumers', image_url: 'logos_1/intuit.jpg' },
    { name: 'Mitsubishi UFJ Financial', market_cap_b: 184.28, description: 'Largest Japanese banking group', image_url: 'logos_1/mitsubishi_ufj_financial.jpg' },
    { name: 'Sony', market_cap_b: 171.04, description: 'Electronics, gaming, and entertainment', image_url: 'logos_1/sony.jpg' },
    { name: 'AT&T', market_cap_b: 181.41, description: 'Telecommunications and mobile services', image_url: 'logos_1/att.jpg' },
    { name: 'Amgen', market_cap_b: 181.32, description: 'Biopharmaceutical and human therapeutics', image_url: 'logos_1/amgen.jpg' },
    { name: 'Applied Materials', market_cap_b: 180.04, description: 'Equipment for semiconductor fabrication', image_url: 'logos_1/applied_materials.jpg' },
    { name: 'Foxconn Industrial Internet', market_cap_b: 179.79, description: 'Electronics manufacturing and smart tech', image_url: 'logos_1/foxconn_industrial_internet.jpg' },
    { name: 'Citigroup', market_cap_b: 179.46, description: 'Multinational investment bank', image_url: 'logos_1/citigroup.jpg' },
    { name: 'Inditex', market_cap_b: 176.47, description: 'Global fashion retailer (Zara)', image_url: 'logos_1/inditex.jpg' },
    { name: 'ServiceNow', market_cap_b: 176.44, description: 'Cloud computing platform services', image_url: 'logos_1/servicenow.jpg' },
    { name: 'Nextera Energy', market_cap_b: 174.68, description: 'Electric power and renewable energy', image_url: 'logos_1/nextera_energy.jpg' },
    { name: 'Verizon', market_cap_b: 173.12, description: 'US telecommunications and wireless', image_url: 'logos_2/verizon.jpg' },
    { name: 'Blackstone Group', market_cap_b: 172.53, description: 'Global alternative asset manager', image_url: 'logos_2/blackstone.jpg' },
    { name: 'Commonwealth Bank', market_cap_b: 171.96, description: 'Australian multinational banking services', image_url: 'logos_2/commonwealth_bank.jpg' },
    { name: 'EssilorLuxottica', market_cap_b: 171.60, description: 'Eyewear and lens manufacturing', image_url: 'logos_2/essilor_luxottica.jpg' },
    { name: 'Intel', market_cap_b: 169.43, description: 'Microprocessors and computer technology', image_url: 'logos_2/intel.jpg' },
    { name: 'Charles Schwab', market_cap_b: 167.72, description: 'Brokerage and financial services', image_url: 'logos_2/charles_schwab.jpg' },
    { name: 'Arista Networks', market_cap_b: 165.43, description: 'Cloud networking solutions', image_url: 'logos_2/arista_networks.jpg' },
    { name: 'Allianz SE', market_cap_b: 164.70, description: 'Global insurance and asset management', image_url: 'logos_2/allianz.jpg' },
    { name: 'BlackRock', market_cap_b: 164.14, description: 'Investment management and tech', image_url: 'logos_2/blackrock.jpg' },
    { name: 'Amphenol', market_cap_b: 163.70, description: 'Connectors and sensor technology', image_url: 'logos_2/amphenol.jpg' },
    { name: 'Booking Holdings (Booking.com)', market_cap_b: 162.71, description: 'Online travel agency services', image_url: 'logos_2/booking_holdings.jpg' },
    { name: 'TJX Companies', market_cap_b: 162.57, description: 'Off-price apparel and home goods', image_url: 'logos_2/tjx_companies.jpg' },
    { name: 'Santander', market_cap_b: 160.65, description: 'Spanish multinational financial services', image_url: 'logos_2/santander.jpg' },
    { name: 'Schneider Electric', market_cap_b: 157.05, description: 'Digital automation and energy management', image_url: 'logos_2/schneider_electric.jpg' },
    { name: 'GE Vernova', market_cap_b: 156.90, description: 'Power generation and renewable energy', image_url: 'logos_2/ge_vernova.jpg' },
    { name: 'Hitachi', market_cap_b: 156.83, description: 'IT, social infrastructure, and industrial', image_url: 'logos_2/hitachi.jpg' },
    { name: 'China Life Insurance', market_cap_b: 156.31, description: 'Chinese life insurance provider', image_url: 'logos_2/china_life_insurance.jpg' },
    { name: 'Danaher', market_cap_b: 156.25, description: 'Science and technology innovation', image_url: 'logos_2/danaher.jpg' },
    { name: 'Deutsche Telekom', market_cap_b: 155.12, description: 'European telecommunications group', image_url: 'logos_2/deutsche_telekom.jpg' },
    { name: 'Gilead Sciences', market_cap_b: 155.10, description: 'Antiviral pharmaceuticals developer', image_url: 'logos_2/gilead_sciences.jpg' },
    { name: 'CM Bank', market_cap_b: 154.96, description: 'Chinese commercial bank', image_url: 'logos_2/cm_bank.jpg' },
    { name: 'Boston Scientific', market_cap_b: 152.23, description: 'Medical devices manufacturer', image_url: 'logos_2/boston_scientific.jpg' },
    { name: 'Accenture', market_cap_b: 152.06, description: 'Global consulting and strategy services', image_url: 'logos_2/accenture.jpg' },
    { name: 'S&P Global', market_cap_b: 149.55, description: 'Financial information and analytics', image_url: 'logos_2/sp_global.jpg' },
    { name: 'Ping An Insurance', market_cap_b: 149.38, description: 'Chinese insurance and financial services', image_url: 'logos_2/ping_an_insurance.jpg' },
    { name: 'Safran', market_cap_b: 149.11, description: 'Aerospace and defense engines', image_url: 'logos_2/safran.jpg' },
    { name: 'KLA', market_cap_b: 149.04, description: 'Semiconductor process control equipment', image_url: 'logos_2/kla.jpg' },
    { name: 'Arm Holdings', market_cap_b: 148.29, description: 'Semiconductor intellectual property', image_url: 'logos_2/arm_holdings.jpg' },
    { name: 'Boeing', market_cap_b: 147.85, description: 'Aerospace and defense manufacturer', image_url: 'logos_2/boeing.jpg' },
    { name: 'Unilever', market_cap_b: 145.90, description: 'Consumer goods and personal care', image_url: 'logos_2/unilever.jpg' },
    { name: 'Xiaomi', market_cap_b: 145.23, description: 'Smartphones and consumer electronics', image_url: 'logos_2/xiaomi.jpg' },
    { name: 'Texas Instruments', market_cap_b: 144.77, description: 'Analog and embedded processing chips', image_url: 'logos_2/texas_instruments.jpg' },
    { name: 'Pfizer', market_cap_b: 142.48, description: 'Pharmaceuticals and biotechnology products', image_url: 'logos_2/pfizer.jpg' },
    { name: 'Bharti Airtel', market_cap_b: 142.07, description: 'Indian telecommunications services', image_url: 'logos_2/bharti_airtel.jpg' },
    { name: 'BHP Group', market_cap_b: 141.96, description: 'Global mining and resource company', image_url: 'logos_2/bhp_group.jpg' },
    { name: 'Toronto Dominion Bank', market_cap_b: 141.14, description: 'Canadian banking and financial services', image_url: 'logos_2/toronto_dominion_bank.jpg' },
    { name: 'TotalEnergies', market_cap_b: 141.14, description: 'Oil, gas, and energy production', image_url: 'logos_2/totalenergies.jpg' },
    { name: 'CNOOC', market_cap_b: 140.50, description: 'Chinese offshore oil and gas', image_url: 'logos_2/cnooc.jpg' },
    { name: 'Palo Alto Networks', market_cap_b: 140.38, description: 'Cybersecurity and cloud protection', image_url: 'logos_2/palo_alto_networks.jpg' },
    { name: 'Iberdrola', market_cap_b: 140.03, description: 'Renewable energy and utilities', image_url: 'logos_2/iberdrola.jpg' },
    { name: 'Adobe', market_cap_b: 138.60, description: 'Creative and digital experience software', image_url: 'logos_2/adobe.jpg' },
    { name: 'Stryker Corporation', market_cap_b: 138.52, description: 'Medical equipment and technology', image_url: 'logos_2/stryker.jpg' },
    { name: 'Eaton', market_cap_b: 136.86, description: 'Power management company', image_url: 'logos_2/eaton.jpg' },
    { name: 'CrowdStrike', market_cap_b: 134.90, description: 'Cloud-native cybersecurity technology', image_url: 'logos_2/crowdstrike.jpg' },
    { name: 'Capital One', market_cap_b: 134.23, description: 'Banking and credit card company', image_url: 'logos_2/capital_one.jpg' },
    { name: 'Welltower', market_cap_b: 133.02, description: 'Healthcare real estate trust', image_url: 'logos_2/welltower.jpg' },
    { name: 'Union Pacific Corporation', market_cap_b: 132.28, description: 'Freight rail transportation', image_url: 'logos_2/union_pacific.jpg' },
    { name: 'Progressive', market_cap_b: 132.04, description: 'Car insurance and financial services', image_url: 'logos_2/progressive.jpg' },
    { name: 'Spotify', market_cap_b: 130.89, description: 'Music and podcast streaming service', image_url: 'logos_2/spotify.jpg' },
    { name: 'ABB', market_cap_b: 129.33, description: 'Robotics and industrial automation', image_url: 'logos_2/abb.jpg' },
    { name: 'Deere & Company (John Deere)', market_cap_b: 128.73, description: 'Agricultural machinery manufacturer', image_url: 'logos_2/deere.jpg' },
    { name: 'Lowe\'s Companies', market_cap_b: 127.78, description: 'Home improvement retail stores', image_url: 'logos_2/lowes.jpg' },
    { name: 'Sanofi', market_cap_b: 127.01, description: 'Global pharmaceutical and healthcare company', image_url: 'logos_2/sanofi.jpg' },
    { name: 'Tata Consultancy Services', market_cap_b: 126.77, description: 'IT services and consulting', image_url: 'logos_2/tata_consultancy_services.jpg' },
    { name: 'Honeywell', market_cap_b: 126.36, description: 'Industrial technology and aerospace', image_url: 'logos_2/honeywell.jpg' },
    { name: 'Dior', market_cap_b: 126.10, description: 'French luxury fashion house', image_url: 'logos_2/dior.jpg' },
    { name: 'Anheuser-Busch Inbev', market_cap_b: 125.46, description: 'Global brewing company', image_url: 'logos_2/anheuser_busch_inbev.jpg' },
    { name: 'BYD', market_cap_b: 125.24, description: 'Chinese electric vehicle maker', image_url: 'logos_2/byd.jpg' },
    { name: 'Compagnie Financiรจre Richemont', market_cap_b: 124.42, description: 'Swiss luxury goods holding', image_url: 'logos_2/richemont.jpg' },
    { name: 'Rolls-Royce Holdings', market_cap_b: 124.37, description: 'Aerospace and defense engines', image_url: 'logos_2/rolls_royce.jpg' },
    { name: 'Banco Bilbao Vizcaya Argentaria', market_cap_b: 123.21, description: 'Spanish multinational financial services', image_url: 'logos_2/bbva.jpg' },
    { name: 'Medtronic', market_cap_b: 122.96, description: 'Medical technology and devices', image_url: 'logos_2/medtronic.jpg' },
    { name: 'UBS', market_cap_b: 122.22, description: 'Swiss global financial services firm', image_url: 'logos_2/ubs.jpg' },
    { name: 'British American Tobacco', market_cap_b: 120.59, description: 'Multinational tobacco products company', image_url: 'logos_2/british_american_tobacco.jpg' },
    { name: 'DBS Group', market_cap_b: 118.45, description: 'Singaporean multinational banking', image_url: 'logos_2/dbs_group.jpg' },
    { name: 'Intesa Sanpaolo', market_cap_b: 117.06, description: 'Italian banking and finance', image_url: 'logos_2/intesa_sanpaolo.jpg' },
    { name: 'Chubb', market_cap_b: 116.29, description: 'Property and casualty insurance', image_url: 'logos_2/chubb.jpg' },
    { name: 'China Shenhua Energy', market_cap_b: 116.09, description: 'Coal and power generation', image_url: 'logos_2/china_shenhua_energy.jpg' },
    { name: 'Analog Devices', market_cap_b: 115.55, description: 'Semiconductors and signal processing', image_url: 'logos_2/analog_devices.jpg' },
    { name: 'Rio Tinto', market_cap_b: 114.94, description: 'Global mining group', image_url: 'logos_2/rio_tinto.jpg' },
    { name: 'Air Liquide', market_cap_b: 114.91, description: 'Industrial gases and services', image_url: 'logos_2/air_liquide.jpg' },
    { name: 'UniCredit', market_cap_b: 114.39, description: 'Pan-European commercial bank', image_url: 'logos_2/unicredit.jpg' },
    { name: 'Prologis', market_cap_b: 114.09, description: 'Logistics real estate trust', image_url: 'logos_2/prologis.jpg' },
    { name: 'Sumitomo Mitsui Financial Group', market_cap_b: 113.59, description: 'Japanese banking and financial services', image_url: 'logos_2/sumitomo_mitsui_financial_group.jpg' },
    { name: 'AIA', market_cap_b: 113.31, description: 'Life insurance and financial services', image_url: 'logos_2/aia.jpg' },
    { name: 'Fast Retailing', market_cap_b: 113.20, description: 'Global apparel retailer (Uniqlo)', image_url: 'logos_2/fast_retailing.jpg' },
    { name: 'ConocoPhillips', market_cap_b: 112.90, description: 'Oil and gas exploration', image_url: 'logos_2/conocophillips.jpg' },
    { name: 'Zijin Mining', market_cap_b: 112.72, description: 'Gold and copper mining', image_url: 'logos_2/zijin_mining.jpg' },
    { name: 'ICICI Bank', market_cap_b: 112.43, description: 'Indian banking and financial services', image_url: 'logos_2/icici_bank.jpg' },
    { name: 'Interactive Brokers', market_cap_b: 112.24, description: 'Brokerage and trading platform', image_url: 'logos_2/interactive_brokers.jpg' },
    { name: 'KKR & Co.', market_cap_b: 111.03, description: 'Global investment firm', image_url: 'logos_2/kkr.jpg' },
    { name: 'Vertex Pharmaceuticals', market_cap_b: 110.91, description: 'Biotechnology and drug discovery', image_url: 'logos_2/vertex_pharmaceuticals.jpg' },
    { name: 'Robinhood', market_cap_b: 110.15, description: 'Financial trading platform', image_url: 'logos_2/robinhood.jpg' },
    { name: 'Foxconn (Hon Hai Precision Industry)', market_cap_b: 108.85, description: 'Electronics manufacturing services', image_url: 'logos_2/foxconn.jpg' },
    { name: 'HCA Healthcare', market_cap_b: 107.85, description: 'Hospital and healthcare facilities', image_url: 'logos_2/hca_healthcare.jpg' },
    { name: 'Lockheed Martin', market_cap_b: 107.77, description: 'Aerospace, arms, and security', image_url: 'logos_2/lockheed_martin.jpg' },
    { name: 'Al Rajhi Bank', market_cap_b: 107.73, description: 'Largest Islamic bank', image_url: 'logos_2/al_rajhi_bank.jpg' },
    { name: 'Southern Copper', market_cap_b: 107.04, description: 'Copper mining and production', image_url: 'logos_2/southern_copper.jpg' },
    { name: 'Brookfield Corporation', market_cap_b: 105.78, description: 'Asset management and real estate', image_url: 'logos_2/brookfield.jpg' },
    { name: 'Constellation Energy', market_cap_b: 105.71, description: 'Electric power generation', image_url: 'logos_2/constellation_energy.jpg' },
    { name: 'Enbridge', market_cap_b: 105.37, description: 'Energy infrastructure and pipelines', image_url: 'logos_2/enbridge.jpg' },
    { name: 'Enel', market_cap_b: 105.12, description: 'Italian energy and utilities', image_url: 'logos_2/enel.jpg' },
    { name: 'Parker-Hannifin', market_cap_b: 104.98, description: 'Motion and control technologies', image_url: 'logos_2/parker_hannifin.jpg' },
    { name: 'McKesson', market_cap_b: 103.93, description: 'Pharmaceutical distribution and IT', image_url: 'logos_2/mckesson.jpg' },
    { name: 'MercadoLibre', market_cap_b: 103.87, description: 'Latin American e-commerce giant', image_url: 'logos_2/mercadolibre.jpg' },
    { name: 'TAQA', market_cap_b: 103.79, description: 'Abu Dhabi energy and water', image_url: 'logos_2/taqa.jpg' },
    { name: 'Investor AB', market_cap_b: 103.28, description: 'Swedish holding company', image_url: 'logos_2/investor_ab.jpg' },
    { name: 'CME Group', market_cap_b: 102.78, description: 'Derivatives and futures exchange', image_url: 'logos_2/cme_group.jpg' },
    { name: 'Zurich Insurance Group', market_cap_b: 102.56, description: 'Global insurance company', image_url: 'logos_3/zurich_insurance_group.jpg' },
];

    let currentCompany = null;
    let nextCompany = null;
    let score = 0;

    // --- DOM Elements (References) ---
    const finalScoreElement = document.getElementById('final-score');
    const scoreElement = document.getElementById('current-score');
    const gameMessageElement = document.getElementById('game-message');
    
    // Cards
    const currentCard = document.getElementById('current-card');
    const nextCard = document.getElementById('next-card');
    const currentOverlay = document.getElementById('current-overlay');
    const nextOverlay = document.getElementById('next-overlay');
    
    // Card Text Elements
    const currentCapElement = currentCard.querySelector('.card-value');
    const nextCapElement = nextCard.querySelector('.card-value');

    // OR Separator
    const orContainer = document.getElementById('or-container');
    const orText = document.getElementById('or-text');
    const orScore = document.getElementById('or-score');
    const playScreen = document.getElementById('play-screen');

    // Highscore DOM refs (NEW)
    const bestScoreValue = document.getElementById('best-score-value');
    const endHighscoreValue = document.getElementById('end-highscore-value');
    const newRecordBadge = document.getElementById('new-record');
    


    // --- Helper Functions ---
    // --- Share Score Function ---
    function shareScore() {
    const score = document.getElementById('final-score')?.textContent || '0';
    const website = 'https://marketcapgame.com';
    const shareText = `I scored ${score} on Higher or Lower Market Cap! Let's see how high you can score! ${website}`;
    if (navigator.share) {
        navigator.share({
            title: 'Higher or Lower Market Cap',
            text: shareText,
            url: website
        }).catch(() => {});
    } else {
        // Fallback: copy to clipboard
        if (navigator.clipboard) {
            navigator.clipboard.writeText(shareText).then(() => {
                showShareNotification('Score copied to clipboard!');
            }, () => {
                showShareNotification('Could not copy score.');
            });
        } else {
            showShareNotification('Sharing not supported.');
        }
    }
}

function showShareNotification(msg) {
    let notif = document.getElementById('share-notification');
    if (!notif) {
        notif = document.createElement('div');
        notif.id = 'share-notification';
        notif.style.position = 'fixed';
        notif.style.top = '24px';
        notif.style.left = '50%';
        notif.style.transform = 'translateX(-50%)';
        notif.style.background = '#222';
        notif.style.color = '#fff';
        notif.style.padding = '12px 24px';
        notif.style.borderRadius = '8px';
        notif.style.zIndex = '9999';
        notif.style.fontSize = '1.1rem';
        notif.style.boxShadow = '0 2px 8px rgba(0,0,0,0.18)';
        document.body.appendChild(notif);
    }
    notif.textContent = msg;
    notif.style.display = 'block';
    setTimeout(() => { notif.style.display = 'none'; }, 1800);
}

     // --- Highscore helpers 
    function getStoredHighscore() {
        const v = localStorage.getItem('hiLoHighscore');
        return v ? Number(v) : 0;
    }
    function setStoredHighscore(value) {
        localStorage.setItem('hiLoHighscore', String(value));
    }
    function updateHighscoreDisplays() {
        const hs = getStoredHighscore();
        if (bestScoreValue) bestScoreValue.textContent = hs;
        if (endHighscoreValue) endHighscoreValue.textContent = hs;
    }

    function showScreen(screenId) {
        document.querySelectorAll('.game-screen').forEach(screen => {
            screen.classList.remove('active');
            screen.classList.add('hidden');
        });
        const target = document.getElementById(screenId);
        target.classList.remove('hidden');
        target.classList.add('active');

        // keep highscore UI up-to-date whenever screens change
        updateHighscoreDisplays();

        // hide new-record badge unless we're on game-over
        if (screenId !== 'game-over-screen' && newRecordBadge) newRecordBadge.style.display = 'none';

        // optional: control start/end videos (if present)
        const startVid = document.getElementById('start-screen-video');
        const endVid = document.getElementById('end-screen-video');
        if (screenId === 'start-screen') {
            startVid?.play().catch(()=>{});
            endVid?.pause();
            if (endVid) endVid.currentTime = 0;
        } else if (screenId === 'game-over-screen') {
            endVid?.play().catch(()=>{});
            startVid?.pause();
            if (startVid) startVid.currentTime = 0;
        } else {
            startVid?.pause();
            endVid?.pause();
        }
            setInfoButtonVisibility(screenId);
    }
        // Show/hide info icon only on start and end screens
        function setInfoButtonVisibility(screenId) {
            const infoBtn = document.getElementById('infoButton');
            if (!infoBtn) return;
            if (screenId === 'start-screen' || screenId === 'game-over-screen') {
                infoBtn.style.display = '';
            } else {
                infoBtn.style.display = 'none';
            }
        }
    
    function formatCap(cap, isTrillion = false) {
    cap = Math.max(0, cap);
    if (isTrillion) {
        return '$' + cap.toLocaleString('en-US', { maximumFractionDigits: 2 }) + 'T';
    }
    return '$' + cap.toLocaleString('en-US') + 'B';
    }
    
    function getRandomCompany(excludeName) {
        if (companies.length === 0) return null;
        let company;
        do {
            const randomIndex = Math.floor(Math.random() * companies.length);
            company = companies[randomIndex];
        } while (company && company.name === excludeName);
        return company;
    }
    function capToBillions(company) {
    if (!company) return 0;
    if (company.market_cap_b !== undefined && !isNaN(Number(company.market_cap_b))) {
        return Number(company.market_cap_b);
    }
    if (company.market_cap_t !== undefined && !isNaN(Number(company.market_cap_t))) {
        return Number(company.market_cap_t) * 1000; // 1T = 1000B
    }
    return 0;
    }
    // Function to set card visuals
    function setCard(cardElement, company, showCap = false) {
    const imageUrl = company ? company.image_url : 'https://picsum.photos/1200/800?random=0'; 
    cardElement.style.backgroundImage = `url('${imageUrl}')`;
    cardElement.querySelector('.h1').textContent = company ? company.name : 'Data Not Ready';
    
    let descElement = cardElement.querySelector('.card-description');
    if (!descElement) {
        descElement = document.createElement('div');
        descElement.className = 'card-description';
        cardElement.querySelector('.card-overlay').appendChild(descElement);
    }
    descElement.textContent = company ? company.description : '';
    
    const capElement = cardElement.querySelector('.card-value');
    const isTrillion = company && company.market_cap_t !== undefined;
    const capValue = isTrillion ? company.market_cap_t : company.market_cap_b;
    
    if (showCap && company) {
        capElement.textContent = formatCap(capValue, isTrillion);
        capElement.style.display = 'inline-block';
    } else if (cardElement.id === 'next-card') {
        capElement.textContent = 'Value: ???';
        capElement.style.display = 'inline-block';
    } else {
        capElement.textContent = ''; 
    }

    // Reset transition properties
    cardElement.style.transition = 'none';
    cardElement.style.transform = 'translateX(0)';
}

    // --- Animation Function for Value Reveal ---
    function animateValueReveal(capElement, targetValue, duration = 1500, isTrillion = false) {
    if (!capElement) return;

    // Non-trillion path: animate 0 -> targetValue (billions)
    if (!isTrillion) {
        const start = 0;
        const end = Number(targetValue) || 0;
        let startTime = null;
        function step(ts) {
            if (!startTime) startTime = ts;
            const progress = Math.min(1, (ts - startTime) / duration);
            const current = Math.floor(start + (end - start) * progress);
            capElement.textContent = formatCap(current, false);
            if (progress < 1) requestAnimationFrame(step);
            else capElement.textContent = formatCap(end, false);
        }
        requestAnimationFrame(step);
        return;
    }

    // Trillion path: two-phase animation
    // Phase 1: 0 -> 1000 (display in B)
    // Phase 2: 1 -> targetValue (display in T)
    const targetT = Number(targetValue) || 0;
    const firstPhaseMs = Math.max(250, Math.round(duration * 0.45)); // ensure reasonable minimum
    const secondPhaseMs = Math.max(250, duration - firstPhaseMs);

    // Phase 1
    let startTime1 = null;
    function step1(ts) {
        if (!startTime1) startTime1 = ts;
        const progress = Math.min(1, (ts - startTime1) / firstPhaseMs);
        const currentB = Math.floor(0 + (1000 - 0) * progress); // 0 -> 1000B
        capElement.textContent = formatCap(currentB, false);
        if (progress < 1) {
            requestAnimationFrame(step1);
        } else {
            // Brief pause so user sees 1000B as transition point
            setTimeout(() => {
                // Phase 2: animate from 1T -> targetT
                let startTime2 = null;
                const startT = 1;
                function step2(ts2) {
                    if (!startTime2) startTime2 = ts2;
                    const progress2 = Math.min(1, (ts2 - startTime2) / secondPhaseMs);
                    const currentT = startT + (targetT - startT) * progress2;
                    // show up to 3 decimal places during animation for smoothness
                    capElement.textContent = formatCap(Number(currentT.toFixed(3)), true);
                    if (progress2 < 1) {
                        requestAnimationFrame(step2);
                    } else {
                        capElement.textContent = formatCap(targetT, true);
                    }
                }
                requestAnimationFrame(step2);
            }, 120); // small gap between phases for clarity
        }
    }

    requestAnimationFrame(step1);
}

    // --- Core Game Functions ---

    function startGame() {
        if (companies.length < 2) {
             gameMessageElement.textContent = "Error: Not enough data loaded to start the game!";
             return;
        }
        score = 0;
        currentCompany = getRandomCompany();
        nextCompany = getRandomCompany(currentCompany.name);
        
        gameMessageElement.style.display = 'none';

        // Reset borders
        currentOverlay.className = 'card-overlay';
        nextOverlay.className = 'card-overlay';

        // Set initial card states
        setCard(currentCard, currentCompany, true);
        setCard(nextCard, nextCompany, false);

        // Enable clicks
        currentCard.style.pointerEvents = 'auto';
        nextCard.style.pointerEvents = 'auto';

        updateDisplay();
    }

    function makeGuess(userGuess) {
    if (!currentCompany || !nextCompany) return;

    // Determine which card was clicked and apply the white border (shrink) animation
    const guessedOverlay = (userGuess === 'lower') ? currentOverlay : nextOverlay;
    const nonGuessedOverlay = (userGuess === 'lower') ? nextOverlay : currentOverlay;
    
    guessedOverlay.classList.add('guess-border');
    // show divider "guess" state (keeps white while border anim runs)
    playScreen?.classList.add('divider-guess');
    
    currentCard.style.pointerEvents = 'none';
    nextCard.style.pointerEvents = 'none';

    // Use unified values (in billions) for comparison so trillions are larger than billions
    const currentCapNum = capToBillions(currentCompany);
    const nextCapNum = capToBillions(nextCompany);
    const isHigher = nextCapNum > currentCapNum;
    const correctAnswer = isHigher ? 'higher' : 'lower';
    
    const currentCapText = formatCap(currentCompany.market_cap_t || currentCompany.market_cap_b, currentCompany.market_cap_t !== undefined);
    const nextCapText = formatCap(nextCompany.market_cap_t || nextCompany.market_cap_b, nextCompany.market_cap_t !== undefined);
    
    // --- REVEAL VALUE WITH ANIMATION ---
    animateValueReveal(nextCapElement, nextCompany.market_cap_t || nextCompany.market_cap_b, 1500, nextCompany.market_cap_t !== undefined); 

        // Wait for animation to finish before deciding the outcome
        setTimeout(() => {
        const isCorrect = userGuess === correctAnswer;
        
        // --- BORDER REVEAL (White to Green/Red) ---
        guessedOverlay.classList.remove('guess-border'); // Remove white border class first
        
        if (isCorrect) {
            // turn border green
            guessedOverlay.classList.add('correct-border');
            // turn divider green in sync
            playScreen?.classList.remove('divider-guess');
            playScreen?.classList.add('correct-divider');
    
    // --- CORRECT GUESS: Advance Game ---
    score++;
    
    // Hide OR, show score popup
    orText.style.visibility = 'hidden';
    const scorePopup = document.getElementById('score-popup');
    scorePopup.textContent = `+${score}`;
    scorePopup.style.display = 'block';
    scorePopup.classList.remove('fade-in');
    // Force reflow for transition
    void scorePopup.offsetWidth;
    scorePopup.classList.add('fade-in');

    // <-- DELAY SLIDE BY 2000ms -->
    setTimeout(() => {
        // Card transition: current slides out left, next moves to the left position
        currentCard.style.transition = 'transform 0.6s ease-in, opacity 0.6s ease-in';
        currentCard.style.transform = 'translateX(-120%)';
        currentCard.style.opacity = '0';

        nextCard.style.transition = 'transform 0.6s ease-out, opacity 0.6s ease-out';
        nextCard.style.transform = 'translateX(-100%)'; 

        // After animation, reset and prepare for next round
        setTimeout(() => {
            // Reset animations and overlays
            orText.style.visibility = 'visible';
            scorePopup.classList.remove('fade-in');
            setTimeout(() => { scorePopup.style.display = 'none'; }, 350);
            orContainer.classList.remove('correct-anim');
            orContainer.classList.remove('score-anim');
            orScore.style.transform = 'scale(0)';
            gameMessageElement.style.display = 'none';
            guessedOverlay.classList.remove('correct-border');
            playScreen?.classList.remove('correct-divider');
            // Next company becomes the new current
            currentCompany = nextCompany;
            nextCompany = getRandomCompany(currentCompany.name);

            // --- Reset Positions and Redraw ---
            currentCard.style.transition = 'none';
            currentCard.style.transform = 'translateX(0)';
            currentCard.style.opacity = '1';
            
            nextCard.style.transition = 'none';
            nextCard.style.transform = 'translateX(0)'; 
            
            setCard(currentCard, currentCompany, true); 
            setCard(nextCard, nextCompany, false); 

            // Re-enable clicks
            currentCard.style.pointerEvents = 'auto';
            nextCard.style.pointerEvents = 'auto';

            updateDisplay();
        }, 700); 
    }, 2000); // 2 second wait before sliding 

            } else {
                // --- INCORRECT GUESS: GAME OVER ---
                
                // Incorrect: Border turns red
                guessedOverlay.classList.add('incorrect-border');
                playScreen?.classList.remove('divider-guess');
                playScreen?.classList.add('incorrect-divider');

                setTimeout(() => {
                finalScoreElement.textContent = score;

                // check and persist highscore
                const prevHigh = getStoredHighscore();
                let isNew = false;
                if (score > prevHigh) {
                    setStoredHighscore(score);
                    isNew = true;
                }

                // update highscore displays and show game-over screen
                updateHighscoreDisplays();
                showScreen('game-over-screen');

                // show 'new record' badge if needed
                if (newRecordBadge) newRecordBadge.style.display = isNew ? 'block' : 'none';

                // Reset styling for next game
                guessedOverlay.classList.remove('incorrect-border');
                gameMessageElement.style.display = 'none';
                guessedOverlay.classList.remove('incorrect-border');
                playScreen?.classList.remove('incorrect-divider');
            }, 2000);
            }
        }, 1600); 
    }

    function updateDisplay() {
        scoreElement.textContent = score;
    }

    // --- Final Execution ---
    updateDisplay();
    showScreen('start-screen'); 
</script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz" crossorigin="anonymous"></script>
</body>
</html>